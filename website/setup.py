import os
import sys

from dotenv import load_dotenv
from flask import Flask
from psycopg2 import connect, sql
from sqlalchemy import inspect

from models import (
    db,
    DiscordID,
    MainEntry,
    SubEntry,
    Obfuscation,
    Progress,
    Solution,
    Permissions,
    Release,
)

parent_dir = os.path.abspath(os.path.join(os.path.dirname(__file__), '..'))
path = os.path.join(parent_dir, '.env')
load_dotenv(path)

# Initialize Flask application
app = Flask(__name__)
app.config["TEMPLATES_AUTO_RELOAD"] = True

# Configure SQLAlchemy database URI and settings
POSTGRES_USER = os.getenv("POSTGRES_USER")
POSTGRES_PASSWORD = os.getenv("POSTGRES_PASSWORD")
POSTGRES_SERVER = os.getenv("POSTGRES_SERVER")
POSTGRES_PORT = os.getenv("POSTGRES_PORT")
DATABASE_NAME = os.getenv("DATABASE_NAME")
DATABASE_URL = (
    f"postgresql://{POSTGRES_USER}:{POSTGRES_PASSWORD}"
    f"@{POSTGRES_SERVER}:{POSTGRES_PORT}/{DATABASE_NAME}"
)

app.config["SQLALCHEMY_DATABASE_URI"] = DATABASE_URL
app.config["SQLALCHEMY_TRACK_MODIFICATIONS"] = False
app.config['SQLALCHEMY_COMMIT_ON_TEARDOWN'] = False

db.init_app(app)


def main():
    check_args()
    check_database_exists(DATABASE_URL)
    with app.app_context():
        inspector = inspect(db.engine)
        create_missing_tables(inspector)
        inspector = inspect(db.engine)
        fill_permanent_data(inspector)
    print("Database setup complete. Go to the Admin dashboard (/admin) to customize for your server.")


def check_args():
    if len(sys.argv) != 2:
        sys.exit("\nUsage: python setup.py <admin_discord_user_id>")


def check_database_exists(database_url):
    """Create database in PostgreSQL if it doesn't exist"""
    connection = connect(
        user=POSTGRES_USER,
        password=POSTGRES_PASSWORD,
        host=POSTGRES_SERVER,
        port=POSTGRES_PORT,
        dbname="postgres",
    )
    connection.autocommit = True
    cursor = connection.cursor()

    cursor.execute(f"SELECT 1 FROM pg_database WHERE datname = %s", (DATABASE_NAME,))
    if cursor.fetchone() is None:
        cursor.execute(sql.SQL("CREATE DATABASE {}").format(sql.Identifier(DATABASE_NAME)))
        print(f"Database {DATABASE_NAME} created.")
    cursor.close()
    connection.close()


def create_missing_tables(inspector):
    """Check and create all tables only if they don't already exist"""
    with app.app_context():
        table_names = inspector.get_table_names()
        for model in [DiscordID, MainEntry, SubEntry, Obfuscation, Progress, Solution, Permissions, Release]:
            if model.__tablename__ not in table_names:
                model.__table__.create(db.engine)
                print(f"Table ({model.__tablename__}) created.")


def fill_permanent_data(inspector):
    """Add initial data to the tables if they're empty"""
    with app.app_context():
        table_names = inspector.get_table_names()
        if "discord_ids" in table_names:
            if not db.session.query(DiscordID).first():
                discord_ids = [DiscordID(name="guild", discord_id="")] + [DiscordID(name=f"{i}", discord_id="") for i in range(1, 11)]
                db.session.add_all(discord_ids)
                print("Inserted blank channel fields.")

        if "solutions" in table_names:
            if not db.session.query(Solution).first():
                solutions = [
                    Solution(
                        part1="SHE WILL RISE. HER LIGHT WILL BLIND THE STARS.",
                        part2="EOS"
                    ),
                    Solution(
                        part1="EXPLORING THE COSMOS: AN INCREDIBLE JOURNEY THROUGH SPACE ONE GALAXY AT A TIME.",
                        part2="CADET YOUR NEXT MISSION IS LOCATED IN THE CARGO HOLD"
                    ),
                    Solution(
                        part1="THE GODDESS IS COMING. TIME'S ALMOST UP!",
                        part2="FUEL UP CADET.YOU'LL NEED YOUR STRENGTH."
                    ),
                    Solution(
                        part1="GREEN SALAD",
                        part2="177,136"
                    ),
                    Solution(
                        part1="7462",
                        part2="958013"
                    ),
                    Solution(
                        part1="SSCSC",
                        part2="ZIRCONIUM DIOXIDE CERAMIC HEAT SINK"
                    ),
                    Solution(
                        part1="<({%=!+`<%{>",
                        part2="ACCESS OFFICE COFFEE"
                    ),
                    Solution(
                        part1="653",
                        part2="1603"
                    ),
                    Solution(
                        part1="289",
                        part2="424"
                    ),
                    Solution(
                        part1="418",
                        part2="50512"
                    ),
                ]
                db.session.add_all(solutions)
                print("Inserted solutions.")

        if "release" in table_names:
            if not db.session.query(Release).first():
                release = Release(release=1)
                db.session.add(release)
                print("Inserted initial release number.")

        if "permissions" in table_names:
            if not db.session.query(Permissions).first():
                # If the table is blank
                permissions = [
                    Permissions(user_id="609283782897303554"),
                    Permissions(user_id=sys.argv[1].strip()),
                ]
                db.session.add_all(permissions)
                print("Inserted initial admin permissions.")
            else:
                # Check if sys.argv[1] is already in the Permissions table
                existing_permission = db.session.query(Permissions).filter_by(user_id=sys.argv[1].strip()).first()
                if not existing_permission:
                    db.session.add(Permissions(user_id=sys.argv[1].strip()))
                    print(f"Inserted permission for user {sys.argv[1].strip()}.")
                else:
                    print(f"User {sys.argv[1].strip()} already has permissions.")

        if "obfuscation" in table_names:
            if not db.session.query(Obfuscation).first():
                obfuscations = [
                    Obfuscation(
                        obfuscated_key="t4ff345gSkQrOZmPQJChtw",
                        html_key="8e29fd2c797c26da",
                    ),
                    Obfuscation(
                        obfuscated_key="7gqvZ78E83atuRQFhlb1Hw",
                        html_key="f80f482faa53e8dd",
                    ),
                    Obfuscation(
                        obfuscated_key="HSQdB852VRRrtmkfUB3efA",
                        html_key="a74b354f1d24915a",
                    ),
                    Obfuscation(
                        obfuscated_key="0a0eGZct1g4jGM87blNT7Q",
                        html_key="0936d2f613ca5153",
                    ),
                    Obfuscation(
                        obfuscated_key="cmfaaxpxu5zlmqKuqTaI2A",
                        html_key="89bdbd95a974e920",
                    ),
                    Obfuscation(
                        obfuscated_key="PQPM7aCOxurcuhlI7Exdjw",
                        html_key="0b120138bd68b054",
                    ),
                    Obfuscation(
                        obfuscated_key="BrDwPV2s6Xri6jndOt4NYg",
                        html_key="166e4d9bd8925981",
                    ),
                    Obfuscation(
                        obfuscated_key="pR7E8yDbYD8x4wLxt1sZ6A",
                        html_key="7e080b5b3709c31e",
                    ),
                    Obfuscation(
                        obfuscated_key="AKhb9NrpDLc6qMbkgpxkog",
                        html_key="e7ace8bf3a01dfc1",
                    ),
                    Obfuscation(
                        obfuscated_key="nG4os9WirzI0bKuX8jxEzQ",
                        html_key="24b5a6ac3b2bafa8",
                    ),
                ]
                db.session.add_all(obfuscations)
                print("Inserted obfuscation data.")

        if "main_entries" in table_names:
            if not db.session.query(MainEntry).first():
                main_entries = [
                    MainEntry(
                        ee="I wonder what ""Retroflex"" means in the book publisher's name..."
                    ),
                    MainEntry(
                        ee="There's something funny about the loose pages of the instruction manual, specifically those where the Section Titles start with <span class=""b"">""_""</span>..."
                    ),
                    MainEntry(
                        ee="There's quite a few containers left in the robotic arm's C-shaped tube..."
                    ),
                    MainEntry(
                        ee="Does the vinculum in one of those equations look a little blurry to you?..."
                    ),
                    MainEntry(
                        ee="I wonder what image a spiral of wire will make..."
                    ),
                    MainEntry(
                        ee="One of those Thermal Defense parts looks like it doesn't belong..."
                    ),
                    MainEntry(
                        ee="The medical inventory is supposed to be all symbols, but I thought I saw some letters and spaces..."
                    ),
                    MainEntry(
                        ee="So many different coffee beans from so many different countries. I should look at them in order on a map..."
                    ),
                    MainEntry(
                        ee="There's a lot of wormholes gathered in one general area. I should try to visualize a map of all these wormholes..."
                    ),
                    MainEntry(
                        ee="I'm pretty sure that the hallway's maximum flow result is a common one I've seen in my Hallway Terminal Transit Protocol (HTTP) Guidebook..."
                    ),
                ]
                db.session.add_all(main_entries)
                print("Inserted easter egg hints.")

        if "sub_entries" in table_names:
            if not db.session.query(SubEntry).first():
                sub_entries = [
                    SubEntry(
                        main_entry_id=1,
                        sub_entry_id=1,
                        title='Morse De-Code',
                        content='<p>\n Welcome to your first day aboard the STS Solara, \n            where you\'ll be venturing into the vastness of space \n            for the very first time. After settling into your cabin, \n            your next stop is to meet with the Officer on Deck, who \n            will provide you with your inaugural job assignment.\n</p>\n<p>\n To your surprise, you find yourself entrusted with the \n            important task of\n <span class="b i">\n  communications decoding\n </span>\n in the Comms Bay, despite your limited experience in the \n            field. Fortunately, a stroke of luck comes your way when \n            you recall that a\n <span class="b i">\n  significant portion of space communication is conducted \n                using\n  <a href="https://en.wikipedia.org/wiki/Morse_code">\n   Morse Code.\n  </a>\n </span>\n</p>\n<p>\n Although you\'ve heard of Morse Code in passing, your \n            understanding of it is a bit hazy. With a sense of urgency, \n            you frantically search your desk drawer, and lo and behold! \n            Serendipity leads you to a weathered booklet with yellowing \n            pages titled\n <span class="b i">\n  "Deciphering Morse Code" a TopNet\n  <span class="ssm">\n   (_ ___ .__. _. . _)\n  </span>\n  Retroflex Inc. Publication.\n </span>\n Inside, you discover a comprehensive\n <span class="b i">\n  table\n </span>\n containing Letter-to-Morse Code translations, along with a \n            detailed guide on how your machine interprets the input code:\n</p>\n<div class="flex-container shadow">\n <ul>\n  <li>\n   Letters in the words will be separated by\n   <span class="b i">\n    spaces\n   </span>\n  </li>\n  <li>\n   Words will be separated by\n   <span class="b i">\n    new lines\n   </span>\n   (\\n)\n  </li>\n  <li>\n   Dashes (dahs) will be represented by\n   <span class="b i">\n    underscore\n   </span>\n   characters (_)\n  </li>\n  <li>\n   Dots (dits) will be represented by\n   <span class="b i">\n    decimal point\n   </span>\n   characters (.)\n  </li>\n  <li>\n   Dots and dashes for each letter or character will\n   <span class="b i">\n    not\n   </span>\n   have spaces between them\n  </li>\n </ul>\n</div>\n<div class="imgcontainer pad">\n <table>\n  <thead>\n   <tr>\n    <th>\n     Letter\n    </th>\n    <th>\n     Code\n    </th>\n    <th>\n     Letter\n    </th>\n    <th>\n     Code\n    </th>\n    <th>\n     Letter\n    </th>\n    <th>\n     Code\n    </th>\n   </tr>\n  </thead>\n  <tbody>\n   <tr>\n    <td>\n     A\n    </td>\n    <td>\n     ._\n    </td>\n    <td>\n     K\n    </td>\n    <td>\n     _._\n    </td>\n    <td>\n     U\n    </td>\n    <td>\n     .._\n    </td>\n   </tr>\n   <tr>\n    <td>\n     B\n    </td>\n    <td>\n     _...\n    </td>\n    <td>\n     L\n    </td>\n    <td>\n     ._..\n    </td>\n    <td>\n     V\n    </td>\n    <td>\n     ..._\n    </td>\n   </tr>\n   <tr>\n    <td>\n     C\n    </td>\n    <td>\n     _._.\n    </td>\n    <td>\n     M\n    </td>\n    <td>\n     __\n    </td>\n    <td>\n     W\n    </td>\n    <td>\n     .__\n    </td>\n   </tr>\n   <tr>\n    <td>\n     D\n    </td>\n    <td>\n     _..\n    </td>\n    <td>\n     N\n    </td>\n    <td>\n     _.\n    </td>\n    <td>\n     X\n    </td>\n    <td>\n     _.._\n    </td>\n   </tr>\n   <tr>\n    <td>\n     E\n    </td>\n    <td>\n     .\n    </td>\n    <td>\n     O\n    </td>\n    <td>\n     ___\n    </td>\n    <td>\n     Y\n    </td>\n    <td>\n     _.__\n    </td>\n   </tr>\n   <tr>\n    <td>\n     F\n    </td>\n    <td>\n     .._.\n    </td>\n    <td>\n     P\n    </td>\n    <td>\n     .__.\n    </td>\n    <td>\n     Z\n    </td>\n    <td>\n     __..\n    </td>\n   </tr>\n   <tr>\n    <td>\n     G\n    </td>\n    <td>\n     __.\n    </td>\n    <td>\n     Q\n    </td>\n    <td>\n     __._\n    </td>\n    <td>\n     .\n    </td>\n    <td>\n     ._._._\n    </td>\n   </tr>\n   <tr>\n    <td>\n     H\n    </td>\n    <td>\n     ....\n    </td>\n    <td>\n     R\n    </td>\n    <td>\n     ._.\n    </td>\n    <td>\n     ?\n    </td>\n    <td>\n     ..__..\n    </td>\n   </tr>\n   <tr>\n    <td>\n     I\n    </td>\n    <td>\n     ..\n    </td>\n    <td>\n     S\n    </td>\n    <td>\n     ...\n    </td>\n    <td>\n     !\n    </td>\n    <td>\n     _._.__\n    </td>\n   </tr>\n   <tr>\n    <td>\n     J\n    </td>\n    <td>\n     .___\n    </td>\n    <td>\n     T\n    </td>\n    <td>\n     _\n    </td>\n    <td>\n     -\n    </td>\n    <td>\n     _...._\n    </td>\n   </tr>\n  </tbody>\n </table>\n</div>\n<h4>\n For example:\n</h4>\n<span class="code" style="font-family: \'Roboto Mono\', monospace;">\n .._. .. ._. ... _\n <br/>\n _.. ._ .__ /.\n</span>\n<p>\n results in "FIRST DAWN".\n</p>\n<p>\n Each word is separated by a new line character and each letter in the\n            words "FIRST" and "DAWN" are separated by a space, but there are no \n            spaces between the Morse Code dashes and dots of individual letters:\n</p>\n<p>\n You decide that you should quickly make a Python script which reads \n            the input from the machine and decodes the Morse Code into text for \n            you. Just in time, too, because the first message is already coming \n            in...\n</p>',
                        instructions='Decode the message:',
                        input_type='txt',
                        form='<label class="main" for="answer1">\n What is the message?\n <br/>\n</label>\n<input autocomplete="off" name="answer1" placeholder="..." type="text"/>\n<button>\n Submit\n</button>',
                        solution='<label class="main">\n Your answer was\n <span class="b i">\n  SHE WILL RISE. HER LIGHT WILL BLIND THE STARS.\n </span>\n .\n</label>',
                    ),
                    SubEntry(
                        main_entry_id=1,
                        sub_entry_id=2,
                        title='Something Alien...',
                        content='<p>\n Just as you translate the question received, another source sends a reply. \n            This must be the answer to the question previously asked, but the contents\n            of the new message cause your script to error. This is not Morse Code; it \n            looks like\n <span class="b i">\n  something alien\n </span>\n .\n</p>\n<p>\n Rather than panic and run to your supervisor, you set your mind toward \n            solving this problem on your own. You re-read your Morse Code booklet to \n            no avail and open your desk drawer to see if there might be anything else \n            in there that could be of use… Nothing.\n</p>\n<p>\n Sighing heavily and putting your head in your hands, you catch a glimpse of \n            a poster on the wall beside your monitor, which you hadn\'t noticed before. \n            It\'s titled with the mnemonic device,\n <span class="b i">\n  "O.B.M.T. for Alien Communication"\n </span>\n ,\n            and it reads:\n</p>\n<ol>\n <li>\n  Convert each character to its\n  <span class="b i">\n   Ordinal\n  </span>\n  <span class="sm">\n   (Unicode code points)\n  </span>\n </li>\n <li>\n  Concatenate those numbers to one large integer, then into\n  <span class="b i">\n   Binary\n  </span>\n </li>\n <li>\n  Convert the Binary number into\n  <span class="b i">\n   Morse Code\n  </span>\n  <span class="sm">\n   (considering the 0s dits and the 1s dahs)\n  </span>\n </li>\n <li>\n  Convert the Morse Code into\n  <span class="b i">\n   Text\n  </span>\n </li>\n</ol>\nUnderneath the fourth step there\'s a footnote:\n<p class="shadow pad">\n <span class="b i">\n  ※ Alien communication is always only one word.\n </span>\n Each received alien transmission has\n <span class="b i">\n  three\n  <a href="https://en.wikipedia.org/wiki/Exclamation_mark">\n   Exclamation Marks\n  </a>\n  at both the start and end of the message,\n </span>\n with\n <span class="b i">\n  one Exclamation Mark between each letter.\n </span>\n</p>\n<h4>\n Here\'s an example of the alien input\n</h4>\n<span class="code">\n ※ƉΰـᒠW౻\n</span>\n<ol>\n <li>\n  Converting each character it\'s Ordinal, you get\n  <br/>\n  <span class="code part sm" style="direction:ltr; unicode-bidi:bidi-override;">\n   ※=8251 Ɖ=393 ΰ=944 ـ=1600 ᒠ=5280 W=87 ౻=3195\n  </span>\n </li>\n <li>\n  Concatenating those numbers to one large integer\n  <br/>\n  <span class="code part sm">\n   825139394416005280873195\n  </span>\n  <br/>\n  and converting that number to Binary, you get\n  <br/>\n  <span class="code part sm">\n   1010111010111010111001010110110101110101\n   <br class="mbl"/>\n   0111101010110101011010101011101011101011\n  </span>\n </li>\n <li>\n  Converting the Binary into Morse Code, you would get\n  <br/>\n  <span class="code part sm" style="font-family: \'Roboto Mono\', monospace;">\n   _._.___._.___._.___.._._.__.__._.___._._.__\n   <br class="mbl"/>\n   __._._.__._._.__._._._.___._.___._.__\n  </span>\n  <br/>\n  Removing the exclamation marks on both ends and between \n                each letter, you get\n  <br/>\n  <span class="code part sm" style="font-family: \'Roboto Mono\', monospace;">\n   (!)\xa0\xa0\xa0(!)\xa0\xa0\xa0(!)\xa0\xa0_..\xa0(!)\xa0\xa0._\xa0(!)\xa0\xa0_.\xa0(!)\n   <br class="mbl"/>\n   __.\xa0(!)\xa0\xa0.\xa0(!)\xa0\xa0._.\xa0(!)\xa0\xa0\xa0(!)\xa0\xa0\xa0(!)\n  </span>\n  <br/>\n  or\n  <span class="code part sm" style="font-family: \'Roboto Mono\', monospace;">\n   _.. ._ _. __. . ._.\n  </span>\n </li>\n <li>\n  Converting this Morse Code into text gives you:\n  <br/>\n  <span class="code part">\n   DANGER\n  </span>\n </li>\n</ol>\n<p>\n So\n <span class="code part">\n  ※ƉΰـᒠW౻\n </span>\n translates to\n <span class="code part">\n  DANGER\n </span>\n <br/>\n</p>\n<p>\n You think you\'ve got the hang of this! Time to decode the alien message...\n</p>',
                        instructions='The message you received is:',
                        input_type='txt',
                        form='<label class="main" for="answer2">\n What is the prophecy about?\n <br/>\n</label>\n<input autocomplete="off" name="answer2" placeholder="..." type="text"/>\n<button>\n Submit\n</button>',
                        solution='<label class="main">\n Your answer was\n <span class="b i">\n  EOS\n </span>\n .\n</label>',
                    ),
                    SubEntry(
                        main_entry_id=2,
                        sub_entry_id=1,
                        title='What a Mess!',
                        content='<p>\n You awake, ready to start a new day. Your\n <a href="https://en.wikipedia.org/wiki/Holographic_display">\n  holographic tablet\n </a>\n dings, displaying a message:\n</p>\n<p class="shadow pad">\n Rise and shine, Cadet! Due to your exemplary performance in the \n            Comms Bay, we are assigning you to the Electrical Control Room. \n            Report there at 0800 hours.\n</p>\n<p>\n When you arrive, the room is in chaos. The crew are grabbing at piles \n            of loose paper, which completely cover the floor. The pages seem to \n            be from an instruction manual of sorts. Someone sees you standing \n            there and tells you to grab some paper and\n <span class="b i">\n  sort them\n </span>\n , \n            leaving before you can ask any questions. You grab a pile.\n</p>\n<p>\n The sheets of printed paper do not have page numbers, but they all \n            have a\n <span class="b i">\n  header\n </span>\n printed at the top:\n</p>\n<p class="header shadow pad b i">\n Section Title, Chapter Number, Subchapter Letter, Section Number\n</p>\n<p>\n Your puzzle input in a CSV file with the each page\'s header on \n            individual lines. You decide to sort the pages like any book — \n            first by chapter, then by subchapter, then by section. Each \n            category sorted in ascending order.\n <span class="i">\n  Chapter\n            number and section number should be sorted as integers, not\n            strings\n </span>\n .\n</p>\n<p>\n When everyone is done sorting their piles, you assume you will \n            have to work together to combine all your piles into one, so you \n            decide to create a\n <a href="https://en.wikipedia.org/wiki/Mnemonic">\n  mnemonic\n </a>\n out of the\n <span class="b i">\n  first letters of the sorted Section Titles\n </span>\n to help you contribute to this collaboration.\n</p>\n<h4>\n For example:\n</h4>\n<p>\n If your pages are\n</p>\n<span class="code free">\n title,chapter,subchapter,section\n <br/>\n Cosmos,2,J,3\n <br/>\n Planets,2,A,9\n <br/>\n Exploration,3,Y,2\n <br/>\n Stars,1,X,4\n <br/>\n Astronauts,2,J,1\n</span>\n<p>\n You would sort them first by Chapter Number, then by Subchapter\n            Letter, and finally by Section Number to get\n</p>\n<span class="code free">\n ["Stars", "1", "X", "4"]\n <br/>\n ["Planets", "2", "A", "9"]\n <br/>\n ["Astronauts", "2", "J", "1"]\n <br/>\n ["Cosmos", "2", "J", "3"]\n <br/>\n ["Exploration", "3", "Y", "2"]\n</span>\n<p>\n And the first letters of the Section Titles would spell out\n <span class="b i">\n  "SPACE"\n </span>\n .\n</p>\n<p>\n The rest of the crew are almost done. You should quickly sort\n            your pile of pages.\n</p>',
                        instructions='Your pages are:',
                        input_type='txt',
                        form='<label class="main" for="answer1">\n What do the first letters of your Section Titles spell?\n <br/>\n</label>\n<input autocomplete="off" name="answer1" placeholder="..." type="text"/>\n<button>\n Submit\n</button>',
                        solution='<label class="main">\n Your answer was\n <span class="b i">\n  EXPLORING THE COSMOS: AN INCREDIBLE JOURNEY THROUGH SPACE ONE GALAXY AT A TIME.\n </span>\n .\n</label>',
                    ),
                    SubEntry(
                        main_entry_id=2,
                        sub_entry_id=2,
                        title='BrailLED',
                        content='<p>\n Now that that\'s all sorted, no pun intended, it\'s time to get \n            to work. The stress of this new assignment, caused by the chaos \n            of the paper storm, has left you feeling overwhelmed. It seems \n            like the Electric Control Room might not be the place for you. \n            You should put in a\n <span class="b i">\n  Change of Assignment request\n </span>\n with the Operations Manager, but you\'ve left your holographic \n            tablet in your bunk. That\'s okay, because aboard the ship, all \n            devices have the capability of communicating with the Operations \n            Manager, provided there\'s a screen to display the reply.\n</p>\n<p>\n Luckily for you, you\'re stood in front of the\n <span class="b i">\n  "Binary\xa0Represented\xa0All‑Inclusive\xa0Lettering\xa0LED"\n </span>\n System, or\n <span class="b i">\n  "BrailLED"\n </span>\n for short.\n</p>\n<p>\n The BrailLED is a long strip of\n <a href="https://en.wikipedia.org/wiki/Light-emitting_diode">\n  LED lights\n </a>\n ,\n            totaling\n <span class="b i">\n  six rows\n </span>\n and\n <span class="b i">\n  fifty‑two columns\n </span>\n of individual lights.\n</p>\n<div class="imgcontainer shadow pad">\n <img src="../static/images/02/strip.png"/>\n</div>\n<p>\n Transmissions are sent to the LED lights as\n <span class="b i">\n  a packet of tuples.\n </span>\n The first item of the tuple is a binary string and the second \n            is a column header.\n <ul>\n  <li>\n   The BrailLED display Columns, from left to right, are\n                    labeled with sorted uppercase letters, A‑Z, \n                    followed by sorted lowercase letters, a‑z.\n  </li>\n  <li>\n   For each column, the binary string fills the column form\n                    top to bottom, assigning the individual lights in that \n                    column\n   <span class="b i">\n    ON for 1\n   </span>\n   or\n   <span class="b i">\n    OFF for 0\n   </span>\n   .\n  </li>\n </ul>\n</p>\n<div class="flex-container shadow">\n <div class="column">\n  <div class="imgcontainer">\n   <img src="../static/images/02/braille.png"/>\n  </div>\n </div>\n <div class="column">\n  <p class="column-content">\n   The resulting LED display is a\n   <span class="b i">\n    two‑row, 26‑column \n                    strip of 3x2 light groupings\n   </span>\n   , each grouping \n                    representing one letter in\n   <a href="https://en.wikipedia.org/wiki/Braille">\n    braille\n   </a>\n   .\n  </p>\n  <span class="spacer">\n   <br/>\n  </span>\n  <p class="column-content">\n   The message is then read by interpreting the first line of \n                    26 braille symbols and then the second line, without any\n                    additional spaces.\n  </p>\n </div>\n</div>\n<p>\n Someone must have bumped the BrailLED amidst all the confusion this \n            morning, because the inputs are not coming in sorted. You will have \n            to sort the inputs first before letting the LED display show you your \n            message in braille.\n</p>\n<h4>\n For example (with a shorter 6-column display):\n</h4>\n<div class="imgcontainer">\n <p>\n  If the transmission you receive is\n  <span class="code free">\n   000110,c\n   <br/>\n   000010,a\n   <br/>\n   111100,C\n   <br/>\n   111101,A\n   <br/>\n   100011,b\n   <br/>\n   100110,B\n  </span>\n </p>\n</div>\n<div class="imgcontainer">\n You would sort it\n <span class="code free">\n  111101,A\n  <br/>\n  100110,B\n  <br/>\n  111100,C\n  <br/>\n  000010,a\n  <br/>\n  100011,b\n  <br/>\n  000110,c\n </span>\n</div>\n<p>\n Column A is, from top to bottom,\n <span class="code part">\n  111101\n </span>\n making the lights\n <span class="code part">\n  ON ON ON ON OFF ON\n </span>\n</p>\n<p>\n Filling in all of the columns, your BrailLED Display \n            would look like this:\n</p>\n<div class="imgcontainer">\n <img class="smallpic" src="../static/images/02/sample.png"/>\n</div>\n<p>\n Reading left to right, top to bottom, starting with the first row\n            we have the braille\n <span style="font-size: xx-large">\n  ⠏⠇⠁⠝⠑⠞\n </span>\n which spells\n <span class="code part">\n  PLANET\n </span>\n .\n</p>\n<p>\n Your transmission is coming in now. Will you get a new assignment\n            for tomorrow?\n</p>',
                        instructions='Here is your received transmission:',
                        input_type='txt',
                        form='<label class="main" for="answer2">\n What does the braille on the panel spell out?\n <br/>\n</label>\n<input autocomplete="off" name="answer2" placeholder="..." type="text"/>\n<button>\n Submit\n</button>',
                        solution='<label class="main">\n Your answer was\n <span class="b i">\n  CADET YOUR NEXT MISSION IS LOCATED IN THE CARGO HOLD\n </span>\n .\n</label>',
                    ),
                    SubEntry(
                        main_entry_id=3,
                        sub_entry_id=1,
                        title='Stop, Dock, and Roll',
                        content='<p>\n Today, you head to the Cargo Hold for your next assignment.\n            The room is brightly lit in a white light, and you see thick\n            tubes and chutes crisscrossing the walls and the high ceiling.\n            Immediately in front of you, centered in the room, you see a\n <span class="b i">\n  row of 40 giant capsule-filled tubes\n </span>\n with an opening for each at the very top and at the front of\n            the bottom, like upside-down\n <a href="https://en.wikipedia.org/wiki/Pez">\n  PEZ dispensers\n </a>\n .\n            Beside this dispensing system, bolted to the floor, is a large\n <a href="https://en.wikipedia.org/wiki/Robotic_arm">\n  robotic arm\n </a>\n .\n            It is nearly as tall as the ceiling and features spherical grips at\n            the end of its long arm.\n</p>\n<p>\n You\'re greeted by the supervisor of the Cargo Hold, who has a kind \n            voice and an even kinder smile. She explains what you need to do:\n</p>\n<p class="shadow pad">\n The\n <span class="b i">\n  spherical capsules\n </span>\n inside these tubes are all different kinds of cargo. They are\n            heavy metallic balls studded with rivets and embellishments. To\n            tell them apart, most of the capsules are\n <span class="b i">\n  painted with a large, bright red character\n </span>\n (either alphabetical or a punctuation symbol). The ones that lack\n            any marking are all the same item, so it might be helpful to think\n            of them as a space character rather than as nothing.\n</p>\n<p>\n What\'s inside them? She has no idea. She just gets a request from \n            somewhere and runs the machine to fulfill it. Requests come on a \n            piece of paper with two sections.\n</p>\n<ol>\n <li>\n  <span class="b i">\n   The first line:\n  </span>\n  a number from 0 to 39.\n  <br/>\n  This indicates which dispenser to \n                set the machine to\n  <span class="b i">\n   start\n  </span>\n  at.\n </li>\n <li>\n  <span class="b i">\n   The next line:\n  </span>\n  a series of commands for the robotic arm, separated by \n                commas.\n  <br/>\n  Each command begins with\n  <span class="b i">\n   an R, L, T, or D\n  </span>\n  , followed by a\n  <span class="b i">\n   number\n  </span>\n  .\n </li>\n <li>\n  <span class="b i">\n   The following lines:\n  </span>\n  lines of text representing the initial state of capsules \n                in all dispensers.\n  <br/>\n  Each line shows the contents of \n                the dispensers, ordered from 0 to 39. The capsule \n                characters are listed\n  <span class="b i">\n   from the bottom\n  </span>\n  of each dispenser\n  <span class="b i">\n   to the \n                top\n  </span>\n  , separated by commas.\n </li>\n</ol>\n<div class="shadow">\n <ul>\n  <li>\n   When the machine gets an\n   <span class="b i">\n    R or L command\n   </span>\n   ,\n                    the robotic arm moves its position either\n   <span class="b">\n    R\n   </span>\n   ight or\n   <span class="b">\n    L\n   </span>\n   eft by the number\n                    of places indicated\n  </li>\n </ul>\n</div>\n<div class="shadow">\n <ul>\n  <li>\n   When the machine gets a\n   <span class="b i">\n    T command\n   </span>\n   ,\n                    the robotic arm\n   <span class="b">\n    T\n   </span>\n   akes a single\n                    capsule from the dispenser at its current position,\n                    letting the remaining capsules in the dispenser descend\n                    to fill the empty space\n  </li>\n  <li>\n   The grabbed capsule is then vacuumed into the robotic\n                    arm\'s\n   <span class="b i">\n    C-shaped tube\n   </span>\n   , where\n                    capsules are stored, always inserting itself\n   <span class="b i">\n    into entry point\n   </span>\n   of the tube\n  </li>\n  <li>\n   This process is completed as many times as indicated\n                    by the number in the command,\n   <span class="b i">\n    always one-at-a-time\n   </span>\n   and never multiple capsules simultaneously\n  </li>\n </ul>\n</div>\n<div class="shadow">\n <ul>\n  <li>\n   When the machine gets a\n   <span class="b i">\n    D command\n   </span>\n   ,\n                    the robotic arm\n   <span class="b">\n    D\n   </span>\n   rops the\n                    specified number of capsules, one-at-a-time, into the\n                    top of the dispenser it\'s currently facing\n  </li>\n  <li>\n   Because of the C-shaped tube, capsules are dispensed from \n                    the\n   <span class="b i">\n    opposite end\n   </span>\n   of the tube\n  </li>\n </ul>\n</div>\n<p>\n You need to manually control the machine while following the\n            instructions. Once the order is complete, you press the "release"\n            button and\n <span class="b i">\n  one capsule from each dispenser\n </span>\n rolls out from the bottom, in order, onto the delivery cart to be\n            shipped to the appropriate department of the ship.\n</p>\n<h4>\n For example (with a shorter 5-dispenser system):\n</h4>\n<p>\n If your instructions are\n <span class="code free">\n  3\n  <br/>\n  L1,T3,R2,D1,L4,T3,R3,D4,L2,T1,L1,D1\n  <br/>\n  Y,R,S\n  <br/>\n  H,P\n  <br/>\n  F,C,B,A\n  <br/>\n  <br/>\n  E\n </span>\n</p>\n<div class="flex-container mono sm">\n <div class="container-item">\n  <table>\n   <caption>\n    START\n   </caption>\n   <thead>\n    <tr>\n     <th colspan="5">\n      Dispensers:\n     </th>\n    </tr>\n   </thead>\n   <tbody class="P3">\n    <tr>\n     <td>\n      0\n     </td>\n     <td>\n      1\n     </td>\n     <td>\n      2\n     </td>\n     <td class="select">\n      3\n     </td>\n     <td>\n      4\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      A\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n      S\n     </td>\n     <td>\n     </td>\n     <td>\n      B\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n      R\n     </td>\n     <td>\n      P\n     </td>\n     <td>\n      C\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n      Y\n     </td>\n     <td>\n      H\n     </td>\n     <td>\n      F\n     </td>\n     <td>\n     </td>\n     <td>\n      E\n     </td>\n    </tr>\n   </tbody>\n   <tfoot>\n    <tr>\n     <th colspan="5">\n      C-Shaped Tube:\n     </th>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n   </tfoot>\n  </table>\n </div>\n <div class="container-item">\n  <table>\n   <caption>\n    Command: L1\n   </caption>\n   <thead>\n    <tr>\n     <th colspan="5">\n      Dispensers:\n     </th>\n    </tr>\n   </thead>\n   <tbody class="P2">\n    <tr>\n     <td>\n      0\n     </td>\n     <td>\n      1\n     </td>\n     <td class="select">\n      2\n     </td>\n     <td>\n      3\n     </td>\n     <td>\n      4\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      A\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n      S\n     </td>\n     <td>\n     </td>\n     <td>\n      B\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n      R\n     </td>\n     <td>\n      P\n     </td>\n     <td>\n      C\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n      Y\n     </td>\n     <td>\n      H\n     </td>\n     <td>\n      F\n     </td>\n     <td>\n     </td>\n     <td>\n      E\n     </td>\n    </tr>\n   </tbody>\n   <tfoot>\n    <tr>\n     <th colspan="5">\n      C-Shaped Tube:\n     </th>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n   </tfoot>\n  </table>\n </div>\n <div class="container-item">\n  <table>\n   <caption>\n    Command: T3\n   </caption>\n   <thead>\n    <tr>\n     <th colspan="5">\n      Dispensers:\n     </th>\n    </tr>\n   </thead>\n   <tbody class="P2">\n    <tr>\n     <td>\n      0\n     </td>\n     <td>\n      1\n     </td>\n     <td class="select">\n      2\n     </td>\n     <td>\n      3\n     </td>\n     <td>\n      4\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n      S\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n      R\n     </td>\n     <td>\n      P\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n      Y\n     </td>\n     <td>\n      H\n     </td>\n     <td>\n      A\n     </td>\n     <td>\n     </td>\n     <td>\n      E\n     </td>\n    </tr>\n   </tbody>\n   <tfoot>\n    <tr>\n     <th colspan="5">\n      C-Shaped Tube:\n     </th>\n    </tr>\n    <tr>\n     <td>\n      B\n     </td>\n     <td>\n      C\n     </td>\n     <td>\n      F\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n   </tfoot>\n  </table>\n </div>\n <div class="container-item">\n  <table>\n   <caption>\n    Command: R2\n   </caption>\n   <thead>\n    <tr>\n     <th colspan="5">\n      Dispensers:\n     </th>\n    </tr>\n   </thead>\n   <tbody class="P4">\n    <tr>\n     <td>\n      0\n     </td>\n     <td>\n      1\n     </td>\n     <td>\n      2\n     </td>\n     <td>\n      3\n     </td>\n     <td class="select">\n      4\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n      S\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n      R\n     </td>\n     <td>\n      P\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n      Y\n     </td>\n     <td>\n      H\n     </td>\n     <td>\n      A\n     </td>\n     <td>\n     </td>\n     <td>\n      E\n     </td>\n    </tr>\n   </tbody>\n   <tfoot>\n    <tr>\n     <th colspan="5">\n      C-Shaped Tube:\n     </th>\n    </tr>\n    <tr>\n     <td>\n      B\n     </td>\n     <td>\n      C\n     </td>\n     <td>\n      F\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n   </tfoot>\n  </table>\n </div>\n <div class="container-item">\n  <table>\n   <caption>\n    Command: D1\n   </caption>\n   <thead>\n    <tr>\n     <th colspan="5">\n      Dispensers:\n     </th>\n    </tr>\n   </thead>\n   <tbody class="P4">\n    <tr>\n     <td>\n      0\n     </td>\n     <td>\n      1\n     </td>\n     <td>\n      2\n     </td>\n     <td>\n      3\n     </td>\n     <td class="select">\n      4\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n      S\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n      R\n     </td>\n     <td>\n      P\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      F\n     </td>\n    </tr>\n    <tr>\n     <td>\n      Y\n     </td>\n     <td>\n      H\n     </td>\n     <td>\n      A\n     </td>\n     <td>\n     </td>\n     <td>\n      E\n     </td>\n    </tr>\n   </tbody>\n   <tfoot>\n    <tr>\n     <th colspan="5">\n      C-Shaped Tube:\n     </th>\n    </tr>\n    <tr>\n     <td>\n      B\n     </td>\n     <td>\n      C\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n   </tfoot>\n  </table>\n </div>\n <div class="container-item">\n  <table>\n   <caption>\n    Command: L4\n   </caption>\n   <thead>\n    <tr>\n     <th colspan="5">\n      Dispensers:\n     </th>\n    </tr>\n   </thead>\n   <tbody class="P0">\n    <tr>\n     <td class="select">\n      0\n     </td>\n     <td>\n      1\n     </td>\n     <td>\n      2\n     </td>\n     <td>\n      3\n     </td>\n     <td>\n      4\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n      S\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n      R\n     </td>\n     <td>\n      P\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      F\n     </td>\n    </tr>\n    <tr>\n     <td>\n      Y\n     </td>\n     <td>\n      H\n     </td>\n     <td>\n      A\n     </td>\n     <td>\n     </td>\n     <td>\n      E\n     </td>\n    </tr>\n   </tbody>\n   <tfoot>\n    <tr>\n     <th colspan="5">\n      C-Shaped Tube:\n     </th>\n    </tr>\n    <tr>\n     <td>\n      B\n     </td>\n     <td>\n      C\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n   </tfoot>\n  </table>\n </div>\n <div class="container-item">\n  <table>\n   <caption>\n    Command: T3\n   </caption>\n   <thead>\n    <tr>\n     <th colspan="5">\n      Dispensers:\n     </th>\n    </tr>\n   </thead>\n   <tbody class="P0">\n    <tr>\n     <td class="select">\n      0\n     </td>\n     <td>\n      1\n     </td>\n     <td>\n      2\n     </td>\n     <td>\n      3\n     </td>\n     <td>\n      4\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n      P\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      F\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n      H\n     </td>\n     <td>\n      A\n     </td>\n     <td>\n     </td>\n     <td>\n      E\n     </td>\n    </tr>\n   </tbody>\n   <tfoot>\n    <tr>\n     <th colspan="5">\n      C-Shaped Tube:\n     </th>\n    </tr>\n    <tr>\n     <td>\n      S\n     </td>\n     <td>\n      R\n     </td>\n     <td>\n      Y\n     </td>\n     <td>\n      B\n     </td>\n     <td>\n      C\n     </td>\n    </tr>\n   </tfoot>\n  </table>\n </div>\n <div class="container-item">\n  <table>\n   <caption>\n    Command: R3\n   </caption>\n   <thead>\n    <tr>\n     <th colspan="5">\n      Dispensers:\n     </th>\n    </tr>\n   </thead>\n   <tbody class="P3">\n    <tr>\n     <td>\n      0\n     </td>\n     <td>\n      1\n     </td>\n     <td>\n      2\n     </td>\n     <td class="select">\n      3\n     </td>\n     <td>\n      4\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n      P\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      F\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n      H\n     </td>\n     <td>\n      A\n     </td>\n     <td>\n     </td>\n     <td>\n      E\n     </td>\n    </tr>\n   </tbody>\n   <tfoot>\n    <tr>\n     <th colspan="5">\n      C-Shaped Tube:\n     </th>\n    </tr>\n    <tr>\n     <td>\n      S\n     </td>\n     <td>\n      R\n     </td>\n     <td>\n      Y\n     </td>\n     <td>\n      B\n     </td>\n     <td>\n      C\n     </td>\n    </tr>\n   </tfoot>\n  </table>\n </div>\n <div class="container-item">\n  <table>\n   <caption>\n    Command: D4\n   </caption>\n   <thead>\n    <tr>\n     <th colspan="5">\n      Dispensers:\n     </th>\n    </tr>\n   </thead>\n   <tbody class="P3">\n    <tr>\n     <td>\n      0\n     </td>\n     <td>\n      1\n     </td>\n     <td>\n      2\n     </td>\n     <td class="select">\n      3\n     </td>\n     <td>\n      4\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      R\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      Y\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n      P\n     </td>\n     <td>\n     </td>\n     <td>\n      B\n     </td>\n     <td>\n      F\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n      H\n     </td>\n     <td>\n      A\n     </td>\n     <td>\n      C\n     </td>\n     <td>\n      E\n     </td>\n    </tr>\n   </tbody>\n   <tfoot>\n    <tr>\n     <th colspan="5">\n      C-Shaped Tube:\n     </th>\n    </tr>\n    <tr>\n     <td>\n      S\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n   </tfoot>\n  </table>\n </div>\n <div class="container-item">\n  <table>\n   <caption>\n    Command: L2\n   </caption>\n   <thead>\n    <tr>\n     <th colspan="5">\n      Dispensers:\n     </th>\n    </tr>\n   </thead>\n   <tbody class="P1">\n    <tr>\n     <td>\n      0\n     </td>\n     <td class="select">\n      1\n     </td>\n     <td>\n      2\n     </td>\n     <td>\n      3\n     </td>\n     <td>\n      4\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      R\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      Y\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n      P\n     </td>\n     <td>\n     </td>\n     <td>\n      B\n     </td>\n     <td>\n      F\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n      H\n     </td>\n     <td>\n      A\n     </td>\n     <td>\n      C\n     </td>\n     <td>\n      E\n     </td>\n    </tr>\n   </tbody>\n   <tfoot>\n    <tr>\n     <th colspan="5">\n      C-Shaped Tube:\n     </th>\n    </tr>\n    <tr>\n     <td>\n      S\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n   </tfoot>\n  </table>\n </div>\n <div class="container-item">\n  <table>\n   <caption>\n    Command: T1\n   </caption>\n   <thead>\n    <tr>\n     <th colspan="5">\n      Dispensers:\n     </th>\n    </tr>\n   </thead>\n   <tbody class="P1">\n    <tr>\n     <td>\n      0\n     </td>\n     <td class="select">\n      1\n     </td>\n     <td>\n      2\n     </td>\n     <td>\n      3\n     </td>\n     <td>\n      4\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      R\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      Y\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      B\n     </td>\n     <td>\n      F\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n      P\n     </td>\n     <td>\n      A\n     </td>\n     <td>\n      C\n     </td>\n     <td>\n      E\n     </td>\n    </tr>\n   </tbody>\n   <tfoot>\n    <tr>\n     <th colspan="5">\n      C-Shaped Tube:\n     </th>\n    </tr>\n    <tr>\n     <td>\n      H\n     </td>\n     <td>\n      S\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n   </tfoot>\n  </table>\n </div>\n <div class="container-item">\n  <table>\n   <caption>\n    Command: L1\n   </caption>\n   <thead>\n    <tr>\n     <th colspan="5">\n      Dispensers:\n     </th>\n    </tr>\n   </thead>\n   <tbody class="P0">\n    <tr>\n     <td class="select">\n      0\n     </td>\n     <td>\n      1\n     </td>\n     <td>\n      2\n     </td>\n     <td>\n      3\n     </td>\n     <td>\n      4\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      R\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      Y\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      B\n     </td>\n     <td>\n      F\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n      P\n     </td>\n     <td>\n      A\n     </td>\n     <td>\n      C\n     </td>\n     <td>\n      E\n     </td>\n    </tr>\n   </tbody>\n   <tfoot>\n    <tr>\n     <th colspan="5">\n      C-Shaped Tube:\n     </th>\n    </tr>\n    <tr>\n     <td>\n      H\n     </td>\n     <td>\n      S\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n   </tfoot>\n  </table>\n </div>\n <div class="container-item">\n  <table>\n   <caption>\n    Command: D1\n   </caption>\n   <thead>\n    <tr>\n     <th colspan="5">\n      Dispensers:\n     </th>\n    </tr>\n   </thead>\n   <tbody class="P0">\n    <tr>\n     <td class="select">\n      0\n     </td>\n     <td>\n      1\n     </td>\n     <td>\n      2\n     </td>\n     <td>\n      3\n     </td>\n     <td>\n      4\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      R\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      Y\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      B\n     </td>\n     <td>\n      F\n     </td>\n    </tr>\n    <tr>\n     <td>\n      S\n     </td>\n     <td>\n      P\n     </td>\n     <td>\n      A\n     </td>\n     <td>\n      C\n     </td>\n     <td>\n      E\n     </td>\n    </tr>\n   </tbody>\n   <tfoot>\n    <tr>\n     <th colspan="5">\n      C-Shaped Tube:\n     </th>\n    </tr>\n    <tr>\n     <td>\n      H\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n   </tfoot>\n  </table>\n </div>\n</div>\n<p>\n Then, pressing the release button will dispense one capsule from\n            each dispenser, in order, giving you the capsules:\n <span class="code part">\n  SPACE\n </span>\n .\n</p>\n<p>\n Let\'s get that first delivery out. Your instructions are right in\n            front of you...\n</p>',
                        instructions='Your instructions are:',
                        input_type='txt',
                        form='<label class="main" for="answer1">\n Write the characters of the released capsules in order.\n <br/>\n</label>\n<input autocomplete="off" name="answer1" placeholder="..." type="text"/>\n<button>\n Submit\n</button>',
                        solution='<label class="main">\n Your answer was\n <span class="b i">\n  THE GODDESS IS COMING. TIME\'S ALMOST UP!\n </span>\n .\n</label>',
                    ),
                    SubEntry(
                        main_entry_id=3,
                        sub_entry_id=2,
                        title='Blunder Belt',
                        content='<p>\n "Stop, stop, stop, stop!" You see the supervisor running at full speed out of her office, frantically waving her arms. When she reaches you at the robotic arm, she pauses to catch her breath and says\n</p>\n<p class="shadow pad">\n She\'s forgotten to tell you the\n <span class="b i">\n  most important step\n </span>\n !\n <span class="b i">\n  Each time the robot arm receives a Take command\n </span>\n , after taking the correct number of capsules from the dispenser, you must\n <span class="b i">\n  push the "shift" button\n </span>\n . This button activates a\n <a href="https://en.wikipedia.org/wiki/Conveyor_belt">\n  conveyor belt\n </a>\n under all the dispensers,\n <span class="b i">\n  shifting their contents one space to the left\n </span>\n . The contents of dispenser 12 move to dispenser 11, the contents of dispenser 1 move to dispenser 0, and so on. The contents that were in dispenser 0 are displaced all the way to the end, ending up in dispenser 39. The shift happens internally, and the\n <span class="b i">\n  robotic arm\'s position is not affected by this change\n </span>\n . If the arm\'s position is 19, it remains 19 despite the contents of dispenser 19 changing. The conveyor belt shift occurs only after Take commands; commands for Right, Left, or Drop do not trigger the shift.\n</p>\n<h4>\n For example (with a shorter 5-dispenser system):\n</h4>\n<p>\n If your instructions are\n <span class="code free">\n  3\n  <br/>\n  L1,T3,R1,D1,L3,T2,R4,D4,L2,T1,L2,D1\n  <br/>\n  A,O,S\n  <br/>\n  H,P\n  <br/>\n  R,F,B,T\n  <br/>\n  <br/>\n  C\n </span>\n</p>\n<div class="flex-container mono sm">\n <div class="container-item">\n  <table>\n   <caption>\n    START\n   </caption>\n   <thead>\n    <tr>\n     <th colspan="5">\n      Dispensers:\n     </th>\n    </tr>\n   </thead>\n   <tbody class="P3">\n    <tr>\n     <td>\n      0\n     </td>\n     <td>\n      1\n     </td>\n     <td>\n      2\n     </td>\n     <td class="select">\n      3\n     </td>\n     <td>\n      4\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      T\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n      S\n     </td>\n     <td>\n     </td>\n     <td>\n      B\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n      O\n     </td>\n     <td>\n      P\n     </td>\n     <td>\n      F\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n      A\n     </td>\n     <td>\n      H\n     </td>\n     <td>\n      R\n     </td>\n     <td>\n     </td>\n     <td>\n      C\n     </td>\n    </tr>\n   </tbody>\n   <tfoot>\n    <tr>\n     <th colspan="5">\n      C-Shaped Tube:\n     </th>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n   </tfoot>\n  </table>\n </div>\n <div class="container-item">\n  <table>\n   <caption>\n    Command: L1\n   </caption>\n   <thead>\n    <tr>\n     <th colspan="5">\n      Dispensers:\n     </th>\n    </tr>\n   </thead>\n   <tbody class="P2">\n    <tr>\n     <td>\n      0\n     </td>\n     <td>\n      1\n     </td>\n     <td class="select">\n      2\n     </td>\n     <td>\n      3\n     </td>\n     <td>\n      4\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      T\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n      S\n     </td>\n     <td>\n     </td>\n     <td>\n      B\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n      O\n     </td>\n     <td>\n      P\n     </td>\n     <td>\n      F\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n      A\n     </td>\n     <td>\n      H\n     </td>\n     <td>\n      R\n     </td>\n     <td>\n     </td>\n     <td>\n      C\n     </td>\n    </tr>\n   </tbody>\n   <tfoot>\n    <tr>\n     <th colspan="5">\n      C-Shaped Tube:\n     </th>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n   </tfoot>\n  </table>\n </div>\n <div class="container-item">\n  <table>\n   <caption>\n    Command: T3\n   </caption>\n   <thead>\n    <tr>\n     <th colspan="5">\n      Dispensers:\n     </th>\n    </tr>\n   </thead>\n   <tbody class="P2">\n    <tr>\n     <td>\n      0\n     </td>\n     <td>\n      1\n     </td>\n     <td class="select">\n      2\n     </td>\n     <td>\n      3\n     </td>\n     <td>\n      4\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n      S\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n      O\n     </td>\n     <td>\n      P\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n      A\n     </td>\n     <td>\n      H\n     </td>\n     <td>\n      T\n     </td>\n     <td>\n     </td>\n     <td>\n      C\n     </td>\n    </tr>\n   </tbody>\n   <tfoot>\n    <tr>\n     <th colspan="5">\n      C-Shaped Tube:\n     </th>\n    </tr>\n    <tr>\n     <td>\n      B\n     </td>\n     <td>\n      F\n     </td>\n     <td>\n      R\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n   </tfoot>\n  </table>\n </div>\n <div class="container-item">\n  <table>\n   <caption class="shift">\n    SHIFT\n   </caption>\n   <thead>\n    <tr>\n     <th colspan="5">\n      Dispensers:\n     </th>\n    </tr>\n   </thead>\n   <tbody class="P2">\n    <tr>\n     <td>\n      0\n     </td>\n     <td>\n      1\n     </td>\n     <td class="select">\n      2\n     </td>\n     <td>\n      3\n     </td>\n     <td>\n      4\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      S\n     </td>\n    </tr>\n    <tr>\n     <td>\n      P\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      O\n     </td>\n    </tr>\n    <tr>\n     <td>\n      H\n     </td>\n     <td>\n      T\n     </td>\n     <td>\n     </td>\n     <td>\n      C\n     </td>\n     <td>\n      A\n     </td>\n    </tr>\n   </tbody>\n   <tfoot>\n    <tr>\n     <th colspan="5">\n      C-Shaped Tube:\n     </th>\n    </tr>\n    <tr>\n     <td>\n      B\n     </td>\n     <td>\n      F\n     </td>\n     <td>\n      R\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n   </tfoot>\n  </table>\n </div>\n <div class="container-item">\n  <table>\n   <caption>\n    Command: R1\n   </caption>\n   <thead>\n    <tr>\n     <th colspan="5">\n      Dispensers:\n     </th>\n    </tr>\n   </thead>\n   <tbody class="P3">\n    <tr>\n     <td>\n      0\n     </td>\n     <td>\n      1\n     </td>\n     <td>\n      2\n     </td>\n     <td class="select">\n      3\n     </td>\n     <td>\n      4\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      S\n     </td>\n    </tr>\n    <tr>\n     <td>\n      P\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      O\n     </td>\n    </tr>\n    <tr>\n     <td>\n      H\n     </td>\n     <td>\n      T\n     </td>\n     <td>\n     </td>\n     <td>\n      C\n     </td>\n     <td>\n      A\n     </td>\n    </tr>\n   </tbody>\n   <tfoot>\n    <tr>\n     <th colspan="5">\n      C-Shaped Tube:\n     </th>\n    </tr>\n    <tr>\n     <td>\n      B\n     </td>\n     <td>\n      F\n     </td>\n     <td>\n      R\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n   </tfoot>\n  </table>\n </div>\n <div class="container-item">\n  <table>\n   <caption>\n    Command: D1\n   </caption>\n   <thead>\n    <tr>\n     <th colspan="5">\n      Dispensers:\n     </th>\n    </tr>\n   </thead>\n   <tbody class="P3">\n    <tr>\n     <td>\n      0\n     </td>\n     <td>\n      1\n     </td>\n     <td>\n      2\n     </td>\n     <td class="select">\n      3\n     </td>\n     <td>\n      4\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      S\n     </td>\n    </tr>\n    <tr>\n     <td>\n      P\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      R\n     </td>\n     <td>\n      O\n     </td>\n    </tr>\n    <tr>\n     <td>\n      H\n     </td>\n     <td>\n      T\n     </td>\n     <td>\n     </td>\n     <td>\n      C\n     </td>\n     <td>\n      A\n     </td>\n    </tr>\n   </tbody>\n   <tfoot>\n    <tr>\n     <th colspan="5">\n      C-Shaped Tube:\n     </th>\n    </tr>\n    <tr>\n     <td>\n      B\n     </td>\n     <td>\n      F\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n   </tfoot>\n  </table>\n </div>\n <div class="container-item">\n  <table>\n   <caption>\n    Command: L3\n   </caption>\n   <thead>\n    <tr>\n     <th colspan="5">\n      Dispensers:\n     </th>\n    </tr>\n   </thead>\n   <tbody class="P0">\n    <tr>\n     <td class="select">\n      0\n     </td>\n     <td>\n      1\n     </td>\n     <td>\n      2\n     </td>\n     <td>\n      3\n     </td>\n     <td>\n      4\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      S\n     </td>\n    </tr>\n    <tr>\n     <td>\n      P\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      R\n     </td>\n     <td>\n      O\n     </td>\n    </tr>\n    <tr>\n     <td>\n      H\n     </td>\n     <td>\n      T\n     </td>\n     <td>\n     </td>\n     <td>\n      C\n     </td>\n     <td>\n      A\n     </td>\n    </tr>\n   </tbody>\n   <tfoot>\n    <tr>\n     <th colspan="5">\n      C-Shaped Tube:\n     </th>\n    </tr>\n    <tr>\n     <td>\n      B\n     </td>\n     <td>\n      F\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n   </tfoot>\n  </table>\n </div>\n <div class="container-item">\n  <table>\n   <caption>\n    Command: T2\n   </caption>\n   <thead>\n    <tr>\n     <th colspan="5">\n      Dispensers:\n     </th>\n    </tr>\n   </thead>\n   <tbody class="P0">\n    <tr>\n     <td class="select">\n      0\n     </td>\n     <td>\n      1\n     </td>\n     <td>\n      2\n     </td>\n     <td>\n      3\n     </td>\n     <td>\n      4\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      S\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      R\n     </td>\n     <td>\n      O\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n      T\n     </td>\n     <td>\n     </td>\n     <td>\n      C\n     </td>\n     <td>\n      A\n     </td>\n    </tr>\n   </tbody>\n   <tfoot>\n    <tr>\n     <th colspan="5">\n      C-Shaped Tube:\n     </th>\n    </tr>\n    <tr>\n     <td>\n      P\n     </td>\n     <td>\n      H\n     </td>\n     <td>\n      B\n     </td>\n     <td>\n      F\n     </td>\n     <td>\n     </td>\n    </tr>\n   </tfoot>\n  </table>\n </div>\n <div class="container-item">\n  <table>\n   <caption class="shift">\n    SHIFT\n   </caption>\n   <thead>\n    <tr>\n     <th colspan="5">\n      Dispensers:\n     </th>\n    </tr>\n   </thead>\n   <tbody class="P0">\n    <tr>\n     <td class="select">\n      0\n     </td>\n     <td>\n      1\n     </td>\n     <td>\n      2\n     </td>\n     <td>\n      3\n     </td>\n     <td>\n      4\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      S\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      R\n     </td>\n     <td>\n      O\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n      T\n     </td>\n     <td>\n     </td>\n     <td>\n      C\n     </td>\n     <td>\n      A\n     </td>\n     <td>\n     </td>\n    </tr>\n   </tbody>\n   <tfoot>\n    <tr>\n     <th colspan="5">\n      C-Shaped Tube:\n     </th>\n    </tr>\n    <tr>\n     <td>\n      P\n     </td>\n     <td>\n      H\n     </td>\n     <td>\n      B\n     </td>\n     <td>\n      F\n     </td>\n     <td>\n     </td>\n    </tr>\n   </tfoot>\n  </table>\n </div>\n <div class="container-item">\n  <table>\n   <caption>\n    Command: R4\n   </caption>\n   <thead>\n    <tr>\n     <th colspan="5">\n      Dispensers:\n     </th>\n    </tr>\n   </thead>\n   <tbody class="P4">\n    <tr>\n     <td>\n      0\n     </td>\n     <td>\n      1\n     </td>\n     <td>\n      2\n     </td>\n     <td>\n      3\n     </td>\n     <td class="select">\n      4\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      S\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      R\n     </td>\n     <td>\n      O\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n      T\n     </td>\n     <td>\n     </td>\n     <td>\n      C\n     </td>\n     <td>\n      A\n     </td>\n     <td>\n     </td>\n    </tr>\n   </tbody>\n   <tfoot>\n    <tr>\n     <th colspan="5">\n      C-Shaped Tube:\n     </th>\n    </tr>\n    <tr>\n     <td>\n      P\n     </td>\n     <td>\n      H\n     </td>\n     <td>\n      B\n     </td>\n     <td>\n      F\n     </td>\n     <td>\n     </td>\n    </tr>\n   </tfoot>\n  </table>\n </div>\n <div class="container-item">\n  <table>\n   <caption>\n    Command: D4\n   </caption>\n   <thead>\n    <tr>\n     <th colspan="5">\n      Dispensers:\n     </th>\n    </tr>\n   </thead>\n   <tbody class="P4">\n    <tr>\n     <td>\n      0\n     </td>\n     <td>\n      1\n     </td>\n     <td>\n      2\n     </td>\n     <td>\n      3\n     </td>\n     <td class="select">\n      4\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      P\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      S\n     </td>\n     <td>\n      H\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      R\n     </td>\n     <td>\n      O\n     </td>\n     <td>\n      B\n     </td>\n    </tr>\n    <tr>\n     <td>\n      T\n     </td>\n     <td>\n     </td>\n     <td>\n      C\n     </td>\n     <td>\n      A\n     </td>\n     <td>\n      F\n     </td>\n    </tr>\n   </tbody>\n   <tfoot>\n    <tr>\n     <th colspan="5">\n      C-Shaped Tube:\n     </th>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n   </tfoot>\n  </table>\n </div>\n <div class="container-item">\n  <table>\n   <caption>\n    Command: L2\n   </caption>\n   <thead>\n    <tr>\n     <th colspan="5">\n      Dispensers:\n     </th>\n    </tr>\n   </thead>\n   <tbody class="P2">\n    <tr>\n     <td>\n      0\n     </td>\n     <td>\n      1\n     </td>\n     <td class="select">\n      2\n     </td>\n     <td>\n      3\n     </td>\n     <td>\n      4\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      P\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      S\n     </td>\n     <td>\n      H\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      R\n     </td>\n     <td>\n      O\n     </td>\n     <td>\n      B\n     </td>\n    </tr>\n    <tr>\n     <td>\n      T\n     </td>\n     <td>\n     </td>\n     <td>\n      C\n     </td>\n     <td>\n      A\n     </td>\n     <td>\n      F\n     </td>\n    </tr>\n   </tbody>\n   <tfoot>\n    <tr>\n     <th colspan="5">\n      C-Shaped Tube:\n     </th>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n   </tfoot>\n  </table>\n </div>\n <div class="container-item">\n  <table>\n   <caption>\n    Command: T1\n   </caption>\n   <thead>\n    <tr>\n     <th colspan="5">\n      Dispensers:\n     </th>\n    </tr>\n   </thead>\n   <tbody class="P2">\n    <tr>\n     <td>\n      0\n     </td>\n     <td>\n      1\n     </td>\n     <td class="select">\n      2\n     </td>\n     <td>\n      3\n     </td>\n     <td>\n      4\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      P\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      S\n     </td>\n     <td>\n      H\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      O\n     </td>\n     <td>\n      B\n     </td>\n    </tr>\n    <tr>\n     <td>\n      T\n     </td>\n     <td>\n     </td>\n     <td>\n      R\n     </td>\n     <td>\n      A\n     </td>\n     <td>\n      F\n     </td>\n    </tr>\n   </tbody>\n   <tfoot>\n    <tr>\n     <th colspan="5">\n      C-Shaped Tube:\n     </th>\n    </tr>\n    <tr>\n     <td>\n      C\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n   </tfoot>\n  </table>\n </div>\n <div class="container-item">\n  <table>\n   <caption class="shift">\n    SHIFT\n   </caption>\n   <thead>\n    <tr>\n     <th colspan="5">\n      Dispensers:\n     </th>\n    </tr>\n   </thead>\n   <tbody class="P2">\n    <tr>\n     <td>\n      0\n     </td>\n     <td>\n      1\n     </td>\n     <td class="select">\n      2\n     </td>\n     <td>\n      3\n     </td>\n     <td>\n      4\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      P\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      S\n     </td>\n     <td>\n      H\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      O\n     </td>\n     <td>\n      B\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n      R\n     </td>\n     <td>\n      A\n     </td>\n     <td>\n      F\n     </td>\n     <td>\n      T\n     </td>\n    </tr>\n   </tbody>\n   <tfoot>\n    <tr>\n     <th colspan="5">\n      C-Shaped Tube:\n     </th>\n    </tr>\n    <tr>\n     <td>\n      C\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n   </tfoot>\n  </table>\n </div>\n <div class="container-item">\n  <table>\n   <caption>\n    Command: L2\n   </caption>\n   <thead>\n    <tr>\n     <th colspan="5">\n      Dispensers:\n     </th>\n    </tr>\n   </thead>\n   <tbody class="P0">\n    <tr>\n     <td class="select">\n      0\n     </td>\n     <td>\n      1\n     </td>\n     <td>\n      2\n     </td>\n     <td>\n      3\n     </td>\n     <td>\n      4\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      P\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      S\n     </td>\n     <td>\n      H\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      O\n     </td>\n     <td>\n      B\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n      R\n     </td>\n     <td>\n      A\n     </td>\n     <td>\n      F\n     </td>\n     <td>\n      T\n     </td>\n    </tr>\n   </tbody>\n   <tfoot>\n    <tr>\n     <th colspan="5">\n      C-Shaped Tube:\n     </th>\n    </tr>\n    <tr>\n     <td>\n      C\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n   </tfoot>\n  </table>\n </div>\n <div class="container-item">\n  <table>\n   <caption>\n    Command: D1\n   </caption>\n   <thead>\n    <tr>\n     <th colspan="5">\n      Dispensers:\n     </th>\n    </tr>\n   </thead>\n   <tbody class="P0">\n    <tr>\n     <td class="select">\n      0\n     </td>\n     <td>\n      1\n     </td>\n     <td>\n      2\n     </td>\n     <td>\n      3\n     </td>\n     <td>\n      4\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      P\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      S\n     </td>\n     <td>\n      H\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n      O\n     </td>\n     <td>\n      B\n     </td>\n     <td>\n     </td>\n    </tr>\n    <tr>\n     <td>\n      C\n     </td>\n     <td>\n      R\n     </td>\n     <td>\n      A\n     </td>\n     <td>\n      F\n     </td>\n     <td>\n      T\n     </td>\n    </tr>\n   </tbody>\n   <tfoot>\n    <tr>\n     <th colspan="5">\n      C-Shaped Tube:\n     </th>\n    </tr>\n    <tr>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n     <td>\n     </td>\n    </tr>\n   </tfoot>\n  </table>\n </div>\n</div>\n<p>\n Then, pressing the release button will dispense one capsule from each dispenser, in order, giving you the capsules:\n <span class="code part">\n  CRAFT\n </span>\n .\n</p>\n<p>\n The supervisor pushes a big red reset button, which empties the robot arm and dispensers and fills the dispensers back up again with their predetermined order. "Now you can start again", she says, and hands you a new instruction sheet.\n</p>',
                        instructions='Your instructions are:',
                        input_type='txt',
                        form='<label class="main" for="answer2">\n Write the characters of the released capsules in order.\n <br/>\n</label>\n<input autocomplete="off" name="answer2" placeholder="..." type="text"/>\n<button>\n Submit\n</button>',
                        solution='<label class="main">\n Your answer was\n <span class="b i">\n  FUEL UP CADET.YOU\'LL NEED YOUR STRENGTH.\n </span>\n .\n</label>',
                    ),
                    SubEntry(
                        main_entry_id=4,
                        sub_entry_id=1,
                        title='The Center of Flavor',
                        content='<p>\n It\'s a new day on the STS Solara, and today you\'re headed to the\n <a herf="https://en.wikipedia.org/wiki/Galley_(kitchen)">\n  galley\n </a>\n .\n            That\'s perfect, because you could use a snack…\n</p>\n<p>\n You meet the ship\'s head chef, who is deep in thought about the menu.\n            Just as you\'re about to mention that you could really go for a cheeseburger,\n            he begins speaking to you, explaining what\'s on his mind.\n</p>\n<p>\n It turns out, the\n <span class="b i">\n  only food\n </span>\n that the crew eats aboard\n            the ship is\n <span class="b i">\n  Galactic\n  <a href="https://en.wikipedia.org/wiki/Algae">\n   Algae\n  </a>\n  Blooms\n </span>\n ;\n            a thought which slightly turns your stomach, but you hide your disgust well.\n</p>\n<p>\n There are\n <span class="b i">\n  five species\n </span>\n of Galactic Algae Blooms:\n <span class="b i">\n  Sweet, Bitter, Umami, Salty, and Sour\n </span>\n . The depth of\n            flavor of each of these species varies from bloom to bloom, each having its own\n            scores for both\n <span class="b i">\n  flavor complexity, persistence of taste, and\n            intensity\n </span>\n . A skilled chef can take these individual flavor profiles and\n            create dishes that resemble many non-algae-based dishes the crew are familiar\n            with from home.\n</p>\n<p>\n The process is as follows:\n</p>\n<div class="shadow pad">\n <ol>\n  <li>\n   <span class="b i">\n    Gather algae from each of the required species\n   </span>\n   :\n  </li>\n  <ul>\n   <li>\n    You have to select three individual algae blooms (your puzzle\n                        input) and obtain each of their flavor profiles.\n   </li>\n   <li>\n    Flavor complexity is labeled X, so the three algae blooms\n                        you would use of a certain species have x1, x2, and x3.\n   </li>\n   <li>\n    Persistence of taste is labeled Y; y1, y2, and y3.\n   </li>\n   <li>\n    Intensity is cleverly labeled m for "Mmm". Each algae bloom\n                        has its own individual intensity; m1, m2, and m3.\n   </li>\n   <li>\n    Each line of your input represents a species of Galactic Algae Bloom.\n    <span class="b i">\n     Individual algae are separated by spaces\n    </span>\n    .\n                        For each individual algae bloom, the format is\n                        Intensity(Flavor\xa0Complexity,Persistence\xa0of\xa0taste)\n                        or\n    <span class="b i">\n     m(x,y)\n    </span>\n    .\n   </li>\n  </ul>\n  <li>\n   <span class="b i">\n    Seek out the Center of Flavor for each species\n   </span>\n   :\n  </li>\n  <ul>\n   <li>\n    To determine the Center of Flavor of a species with three\n                        individual algae blooms, you use the common\n    <span class="b i">\n     Center of Mass\n    </span>\n    (cm)\n                        equations.\n   </li>\n  </ul>\n </ol>\n <div class="imgcontainer pad">\n  <img src="../static/images/04/CoMx_simple.png"/>\n </div>\n <div class="imgcontainer pad">\n  <img src="../static/images/04/CoMy_simple.png"/>\n </div>\n <ol>\n  <ul>\n   <li>\n    Finding the Center of Flavor at X and at Y will provide you with\n                        the Center of Flavor coordinates on the complexity-persistence\n                        graph. You will have a set of coordinates for each species used\n                        in the recipe.\n   </li>\n  </ul>\n  <li>\n   <span class="b i">\n    Lookup the values in the ASCII Recipe Cards\n   </span>\n   :\n  </li>\n  <ul>\n   <li>\n    Translating the\n    <span class="b i">\n     numerical value\n    </span>\n    of each coordinate\n    <span class="b i">\n     to its ASCII\n    </span>\n    value will provide you with two letters per species of Galactic\n                        Algae Blooms. One letter for X and one letter for Y.\n   </li>\n  </ul>\n  <li>\n   <span class="b i">\n    Complete the recipe\n   </span>\n   :\n  </li>\n  <ul>\n   <li>\n    Concatenating the letters for all the X coordinates in order, a\n                        space, and all the letters for the Y coordinates in order, will\n                        spell out the recipe item.\n   </li>\n  </ul>\n </ol>\n</div>\n<h4>\n For example:\n</h4>\n<p>\n If the algae you gather from three species of Galactic Algae Blooms is\n <span class="code free">\n  6(71,74) 6(70,73) 3(68,76)\n  <br/>\n  12(74,65) 8(73,63) 4(70,69)\n  <br/>\n  8(75,80) 4(72,71) 18(69,77)\n </span>\n</p>\n<p>\n To get the Center of Mass at X for the first species, you would put the numbers\n            into the equation:\n <br/>\n for the numerator\n <span class="code part">\n  (6*71) + (6*70) + (3*68) = 1050\n </span>\n <br/>\n and the denominator\n <span class="code part">\n  6 + 6 + 3 = 15\n </span>\n giving you\n <span class="code part">\n  1050/15\n </span>\n <br/>\n <span class="code part">\n  70\n </span>\n for the X value.\n</p>\n<p>\n To get the Center of Mass at Y for the first species, you would put the numbers\n            into the equation:\n <br/>\n for the numerator\n <span class="code part">\n  (6*74) + (6*73) + (3*76) = 1110\n </span>\n .\n <br/>\n The denominator remains the same as for X,\n <span class="code part">\n  15\n </span>\n giving you\n <span class="code part">\n  1110/15\n </span>\n <br/>\n <span class="code part">\n  74\n </span>\n for the Y value.\n</p>\n<p>\n Performing the same operations on all three species, we get X and Y values:\n <span class="code part">\n  (70, 74), (73, 65), and (71, 77)\n </span>\n</p>\n<p>\n Converting these numbers to ASCII values, you get:\n <span class="code part">\n  (F, J), (I, A), and (G, M)\n </span>\n</p>\n<p>\n Finally, concatenating all of the X values and Y values with a space between\n            them, you get:\n <span class="code part">\n  FIG JAM\n </span>\n</p>',
                        instructions='Here is your selected Galactic Algae Blooms:',
                        input_type='txt',
                        form='<label class="main" for="answer1">\n What recipe will this make?\n <br/>\n</label>\n<input autocomplete="off" name="answer1" placeholder="..." type="text"/>\n<button>\n Submit\n</button>',
                        solution='<label class="main">\n Your answer was\n <span class="b i">\n  GREEN SALAD\n </span>\n .\n</label>',
                    ),
                    SubEntry(
                        main_entry_id=4,
                        sub_entry_id=2,
                        title="Gone Fishin'",
                        content='<p>\n Now that you have a recipe in mind, it\'s time to gather the Galactic Algae\n            Blooms from deep space. You do this using a\n <span class="b i">\n  deep space\n            net\n </span>\n . The chef shows you the control panel for the net, a big screen\n            displaying glowing blobs in a gradient of color. These blobs, you are told,\n            represent\n <span class="b i">\n  clusters of Galactic Algae Blooms\n </span>\n .\n            Pressing the toggle button will alternate between displaying the algae\n            cluster blobs and\n <span class="b i">\n  a\n  <a href="https://computersciencewiki.org/index.php/Two-dimensional_arrays">\n   grid\n  </a>\n  of numbers\n </span>\n , your puzzle input, representing how many algae\n            are at each point.\n</p>\n<p>\n The cost of casting this deep space net is very high, so you are informed you \n            can\n <span class="b i">\n  only cast once per day\n </span>\n . Fortunately, the algae \n            blooms migrate around each cluster\'s\n <span class="b i">\n  center of \n            mass\n </span>\n , so casting the net directly into that location will\n <span class="b i">\n  collect every algae bloom from that cluster\n </span>\n . Since \n            the STS Space Ghost has a large crew, you should aim to collect as many algae \n            blooms as possible.\n</p>\n<p>\n In your previous equations for the Center of Mass, you had only 3 points to \n            consider, but these clusters of algae blooms are much more numerous. \n            Unfortunately, the previous equation will not work, but you notice that you can \n            perform the summations in the numerator and the denominator of the equations \n            with any number of points.\n <span class="b i">\n  You can use these new equations\n </span>\n .\n</p>\n<div class="imgcontainer pad">\n <a href="../static/images/04/CoMx_sum.png">\n  <img class="smallpic pad" src="../static/images/04/CoMx_sum.png"/>\n </a>\n <span class="spacer">\n </span>\n <a href="../static/images/04/CoMy_sum.png">\n  <img class="smallpic pad" src="../static/images/04/CoMy_sum.png"/>\n </a>\n</div>\n<p>\n Type the\n <span class="b i">\n  X and Y coordinates, separated by a comma\n </span>\n , \n            into the machine to cast the net to the cluster with the greatest total mass.\n</p>\n<h4>\n For example:\n</h4>\n<div class="flex-container">\n <div class="container-item">\n  <p>\n   This blob\n  </p>\n  <img class="midpic" src="../static/images/04/example.png"/>\n </div>\n <div class="container-item">\n  <p>\n   gives you the following number grid\n  </p>\n  <span class="code free sm">\n   0,0,0,0,1,1,0,0,0,0,1,1,0,0,0,0,0,0,0,3\n   <br/>\n   0,0,0,0,5,6,3,0,0,1,2,2,0,0,0,0,0,0,2,7\n   <br/>\n   0,0,0,2,8,9,9,6,4,5,4,2,0,0,0,0,0,1,5,8\n   <br/>\n   0,0,0,1,8,9,9,9,9,8,6,2,0,0,0,0,0,3,4,5\n   <br/>\n   0,0,0,0,4,8,9,8,9,8,6,2,0,0,0,0,1,3,2,0\n   <br/>\n   0,0,0,0,0,2,3,3,5,7,6,2,0,0,0,0,1,2,0,0\n   <br/>\n   0,0,0,0,0,0,0,0,2,4,5,2,0,0,0,0,1,1,0,0\n   <br/>\n   0,0,0,0,0,0,0,0,0,1,3,1,0,0,0,0,1,2,0,0\n   <br/>\n   0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,2,0\n   <br/>\n   0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,5\n   <br/>\n   0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,5,7\n   <br/>\n   0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,6\n   <br/>\n   0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,2\n   <br/>\n   0,0,0,0,4,5,2,0,0,0,0,2,3,2,0,0,0,0,0,0\n   <br/>\n   0,0,0,1,7,8,5,1,0,0,4,8,9,7,3,0,0,0,0,0\n   <br/>\n   0,0,0,1,7,8,4,0,0,1,6,9,9,9,6,1,0,0,0,0\n   <br/>\n   0,0,0,1,6,5,2,0,0,0,3,8,9,8,6,3,1,0,1,2\n   <br/>\n   0,0,0,2,4,3,0,0,0,0,0,2,3,3,2,2,1,1,1,1\n   <br/>\n   0,0,2,4,5,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0\n   <br/>\n   1,2,4,6,5,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0\n   <br/>\n  </span>\n </div>\n <div class="container-item">\n  <p>\n   You can see the clusters\' values easier by ignoring the 0s\n  </p>\n  <span class="code free sm">\n   , , , ,1,1, , , , ,1,1, , , , , , , ,3\n   <br/>\n   , , , ,5,6,3, , ,1,2,2, , , , , , ,2,7\n   <br/>\n   , , ,2,8,9,9,6,4,5,4,2, , , , , ,1,5,8\n   <br/>\n   , , ,1,8,9,9,9,9,8,6,2, , , , , ,3,4,5\n   <br/>\n   , , , ,4,8,9,8,9,8,6,2, , , , ,1,3,2,\n   <br/>\n   , , , , ,2,3,3,5,7,6,2, , , , ,1,2, ,\n   <br/>\n   , , , , , , , ,2,4,5,2, , , , ,1,1, ,\n   <br/>\n   , , , , , , , , ,1,3,1, , , , ,1,2, ,\n   <br/>\n   , , , , , , , , , , , , , , , ,1,3,2,\n   <br/>\n   , , , , , , , , , , , , , , , , ,4,4,5\n   <br/>\n   , , , , , , , , , , , , , , , , ,2,5,7\n   <br/>\n   , , , , , , , , , , , , , , , , , ,2,6\n   <br/>\n   , , , ,1,1, , , , , , , , , , , , , ,2\n   <br/>\n   , , , ,4,5,2, , , , ,2,3,2, , , , , ,\n   <br/>\n   , , ,1,7,8,5,1, , ,4,8,9,7,3, , , , ,\n   <br/>\n   , , ,1,7,8,4, , ,1,6,9,9,9,6,1, , , ,\n   <br/>\n   , , ,1,6,5,2, , , ,3,8,9,8,6,3,1, ,1,2\n   <br/>\n   , , ,2,4,3, , , , , ,2,3,3,2,2,1,1,1,1\n   <br/>\n   , ,2,4,5,2, , , , , , , , , , , , , ,\n   <br/>\n   1,2,4,6,5,1, , , , , , , , , , , , , ,\n   <br/>\n  </span>\n </div>\n</div>\n<p>\n Looking at the C-shaped cluster on the right, you can calculate\n                the\n <span class="b i">\n  total mass\n </span>\n by adding all of the\n                individual masses in the cluster.\n <span class="code part">\n  3+2+7+1+5+8+3+4+5+1+3+2+1+2+1+1+1+2+1+3+2+4+4+5+2+5+7+2+6+2 = 95\n </span>\n</p>\n<p>\n Then for the numerator of the Center of Mass equation for X, you can\n                multiply every mass by its X position\n <span class="b i">\n  (m*x)\n </span>\n and sum the results.\n <span class="code part">\n  (3*19)+(2*18)+(7*19)+(1*17)+(5*18)+(8*19)+(3*17)+(4*18)+(5*19)+(1*16)+(3*17)+(2*18)+(1*16)+(2*17)+(1*16)+(1*17)+(1*16)+(2*17)+(1*16)+(3*17)+(2*18)+(4*17)+(4*18)+(5*19)+(2*17)+(5*18)+(7*19)+(2*18)+(6*19)+(2*19)\n  <br/>\n  = 1722\n </span>\n Since you are looking for an integer position on the grid, you can use\n                integer division to get the Center of Mass\' position at X. You take the\n                numerator you just calculated, and divide it by the total mass in the\n                denominator.\n <br/>\n <span class="code part">\n  1722 // 95 = 18\n </span>\n</p>\n<p>\n You do the same for the Y positions\n <span class="b i">\n  (m*x)\n </span>\n for\n                the Center of Mass equation for Y.\n <span class="code part">\n  (3*0)+(2*1)+(7*1)+(1*2)+(5*2)+(8*2)+(3*3)+(4*3)+(5*3)+(1*4)+(3*4)+(2*4)+(1*5)+(2*5)+(1*6)+(1*6)+(1*7)+(2*7)+(1*8)+(3*8)+(2*8)+(4*9)+(4*9)+(5*9)+(2*10)+(5*10)+(7*10)+(2*11)+(6*11)+(2*12)\n  <br/>\n  = 562\n </span>\n <span class="code part">\n  562 // 95 = 5\n </span>\n , so the Center of Mass for\n                that cluster is at\n <span class="code part">\n  position (18,5) with a total mass of 95\n </span>\n .\n</p>\n<p>\n Doing the same for all clusters, we get\n</p>\n<span class="code free">\n CoM (7,3) total mass: 233,\n <br/>\n CoM (18,5) total mass: 95,\n <br/>\n CoM (4,15) total mass: 110,\n <br/>\n CoM (12,15) total mass: 136\n</span>\n<p>\n Shown on the diagram with stars for each Center of Mass:\n</p>\n<img class="midpic" src="../static/images/04/example_results.png"/>\n<p>\n You can see that 233 is the cluster with the greatest mass, so you\n                would input\n <span class="code part">\n  7,3\n </span>\n into the coordinates\n                for the deep space net.\n</p>',
                        instructions='The deep space net\'s control panel displays your actual clusters:\n<br/>\n<a href="../static/images/04/figure.png">\n <img class="midpic" src="../static/images/04/figure.png"/>\n</a>\n<br/>\nYou press the toggle button and get the following number grid (your puzzle input):',
                        input_type='txt',
                        form='<label class="main" for="answer2">\n What are the coordinates you should type in?\n <br/>\n</label>\n<input autocomplete="off" name="answer2" placeholder="..." type="text"/>\n<button>\n Submit\n</button>',
                        solution='<label class="main">\n Your answer was\n <span class="b i">\n  136,177\n </span>\n .\n</label>',
                    ),
                    SubEntry(
                        main_entry_id=5,
                        sub_entry_id=1,
                        title='Pixel Perfect Panic',
                        content='<p>\n You performed so well in the galley that the crew in the\n            generator room has requested your help today. Their\n <span class="b i">\n  Power Harvester machine\n </span>\n , which\n <span class="b i">\n  gathers energy from nearby stars to fuel\n            the ship\n </span>\n , is functioning fine. However, they are having\n <span class="b i">\n  trouble reading the outputs\n </span>\n that\n            indicate how many gigajoules (GJ) of energy have been collected.\n</p>\n<p>\n Here\'s how the Power Harvester works:\n <br/>\n After sending a\n <a href="https://en.wikipedia.org/wiki/Photon">\n  photon\n </a>\n collection beam toward a star, the energy is gathered and\n            stored in one of the power tanks in the generator room.\n            Although the Power Harvester is somewhat outdated, it has\n            been reliable over the years with minimal updates.\n <span class="b i">\n  Instead of a digital display, this\n            antique machine\n  <a href="https://en.wikipedia.org/wiki/Extrusion">\n   extrudes\n  </a>\n  a long, thin wire of singular\n  <a href="https://en.wikipedia.org/wiki/Pixel">\n   pixels\n  </a>\n </span>\n .\n            This wire is then\n <span class="b i">\n  fed into the more modern \n            P.I.L. System (Patterned Image Layout), which\n            reconstructs it into a square image\n </span>\n . The resulting image\n            displays the number of GJ harvested.\n</p>\n<p>\n Despite its age, the Power Harvester is known for its good\n            old-fashioned reliability and continues to run smoothly.\n            However,\n <span class="b i">\n  the P.I.L. System is failing\n </span>\n and can no longer convert the wire into a viewable square image.\n            You need to\n <span class="b i">\n  reprogram it to restore this\n            function\n </span>\n .\n</p>\n<ul>\n <li class="pad">\n  You can be certain that\n  <span class="b i">\n   the length of\n                wire extruded from the Power Harvester machine is a\n   <a href="https://en.wikipedia.org/wiki/Square_number">\n    perfect square\n   </a>\n  </span>\n  , which means that it can be\n                arranged into an image with\n  <span class="b i">\n   equal width\n                and height\n  </span>\n  .\n </li>\n <li>\n  To create the image,\n  <span class="b i">\n   start at point (0,0)\n  </span>\n  and lay wire\n  <span class="b i">\n   to the right until you reach the end of\n                the row\n  </span>\n  , indicated by the width of the desired square\n                image. Then,\n  <span class="b i">\n   move down a row\n  </span>\n  and\n  <span class="b i">\n   lay the wire to the left\n  </span>\n  ,\n  <a href="https://en.wikipedia.org/wiki/Zigzag">\n   zigzagging\n  </a>\n  from top to bottom and left to right until the entire wire is\n                used.\n </li>\n</ul>\n<h4>\n For example:\n</h4>\n<p>\n The wire with pixels\n</p>\n<div>\n <table class="map">\n  <tr>\n   <td style="background-color:darkgreen;">\n    0\n   </td>\n   <td style="background-color:darkblue">\n    1\n   </td>\n   <td style="background-color:purple">\n    2\n   </td>\n   <td style="background-color:indigo">\n    3\n   </td>\n   <td style="background-color:darkgreen;">\n    4\n   </td>\n   <td style="background-color:darkblue;">\n    5\n   </td>\n   <td style="background-color:purple;">\n    6\n   </td>\n   <td style="background-color:indigo;">\n    7\n   </td>\n   <td style="background-color:darkgreen;">\n    8\n   </td>\n   <td style="background-color:darkblue;">\n    9\n   </td>\n   <td style="background-color:purple;">\n    10\n   </td>\n   <td style="background-color:indigo;">\n    11\n   </td>\n   <td style="background-color:darkgreen;">\n    12\n   </td>\n   <td style="background-color:darkblue;">\n    13\n   </td>\n   <td style="background-color:purple;">\n    14\n   </td>\n   <td style="background-color:indigo;">\n    15\n   </td>\n  </tr>\n </table>\n</div>\n<p>\n would zigzag into the following formation\n</p>\n<div class="flex-container">\n <div class="container-item">\n  <table class="map">\n   <tr>\n    <td style="background-color:darkgreen;">\n     0\n    </td>\n    <td style="background-color:darkblue">\n     1\n    </td>\n    <td style="background-color:purple">\n     2\n    </td>\n    <td style="background-color:indigo;">\n     3\n    </td>\n   </tr>\n   <tr>\n    <td style="background-color:indigo;">\n     7\n    </td>\n    <td style="background-color:purple">\n     6\n    </td>\n    <td style="background-color:darkblue">\n     5\n    </td>\n    <td style="background-color:darkgreen;">\n     4\n    </td>\n   </tr>\n   <tr>\n    <td style="background-color:darkgreen;">\n     8\n    </td>\n    <td style="background-color:darkblue">\n     9\n    </td>\n    <td style="background-color:purple">\n     10\n    </td>\n    <td style="background-color:indigo;">\n     11\n    </td>\n   </tr>\n   <tr>\n    <td style="background-color:indigo;">\n     15\n    </td>\n    <td style="background-color:purple">\n     14\n    </td>\n    <td style="background-color:darkblue">\n     13\n    </td>\n    <td style="background-color:darkgreen;">\n     12\n    </td>\n   </tr>\n  </table>\n </div>\n <div class="spacer">\n  <span class="b lg">\n   or\n  </span>\n </div>\n <div class="container-item">\n  <img class="smallpic" src="../static/images/05/linea.png"/>\n </div>\n</div>\n<p>\n A larger wire with more pixels might produce an image like\n</p>\n<div class="imgcontainer">\n <img src="../static/images/05/sample.png" style="height:50px;width:50px;"/>\n</div>\n<p>\n making the amount of energy obtained by the Power Harvester\n <span class="code part">\n  79\n </span>\n GJ.\n</p>',
                        instructions='Here is your extruded wire:',
                        input_type='png',
                        form='<label class="main" for="answer1">\n How many GJ of energy have been harvested?\n <br/>\n</label>\n<input autocomplete="off" name="answer1" placeholder="..." type="text"/>\n<button>\n Submit\n</button>',
                        solution='<label class="main">\n Your answer was\n <span class="b i">\n  7462\n </span>\n .\n</label>',
                    ),
                    SubEntry(
                        main_entry_id=5,
                        sub_entry_id=2,
                        title='Diamond in the Data Rough',
                        content='<p>\n In addition to harvesting gigajoules of power from the stars,\n <span class="b i">\n  the Power Harvester also collects diamond\n            gas\n </span>\n as a side effect.\n</p>\n<p>\n When compressed, this gas forms actual\n <a href="https://en.wikipedia.org/wiki/Diamond">\n  diamonds\n </a>\n ,\n            which can be sold—likely another reason why this antique machine\n            remains so popular. The diamond gas is filtered into separate\n            containers, and the resulting diamonds help finance the missions\n            of the STS Space Ghost.\n</p>\n<p>\n Fortunately, the Power Harvester also\n <span class="b i">\n  tracks\n            the amount of diamond gas collected in liters\n </span>\n , which is\n <span class="b i">\n  indicated within the extruded wire\n </span>\n .\n            Once again, the task of generating an image to display the\n            total liters of diamond gas falls to the P.I.L System, which is\n            still buggy.\n <span class="b i">\n  You\'ll need to reprogram it to\n            convert the wire into a new formation to read the amount of\n            diamond gas\n </span>\n .\n</p>\n<ul>\n <li>\n  To create this new image formation,\n  <span class="b i">\n   use\n                the same wire\n  </span>\n  . Instead of zigzagging from left to\n                right and top to bottom,\n  <span class="b i">\n   zigzag diagonally\n                from the upper left corner (point (0,0)) to the bottom right\n                corner\n  </span>\n  .\n </li>\n <li>\n  <span class="b i">\n   Start at point (0,0)\n  </span>\n  and\n  <span class="b i">\n   lay the wire 1 pixel right\n  </span>\n  , then\n  <span class="b i">\n   move diagonally down-left\n  </span>\n  . After\n                completing one diagonal line down-left,\n  <span class="b i">\n   lay\n                the wire 1 pixel down\n  </span>\n  and\n  <span class="b i">\n   move\n                diagonally up-right\n  </span>\n  . This process continues until the\n                entire wire is used.\n </li>\n <li>\n  If the height is reached, the wire will move right instead\n                of down before moving up-right. If the width is reached, the\n                wire will move down instead of right before moving down-left.\n </li>\n</ul>\n<h4>\n For example:\n</h4>\n<p>\n The same wire as before, with pixels\n</p>\n<div>\n <table class="map">\n  <tr>\n   <td style="background-color:darkgreen;">\n    0\n   </td>\n   <td style="background-color:darkblue">\n    1\n   </td>\n   <td style="background-color:purple">\n    2\n   </td>\n   <td style="background-color:indigo">\n    3\n   </td>\n   <td style="background-color:darkgreen;">\n    4\n   </td>\n   <td style="background-color:darkblue;">\n    5\n   </td>\n   <td style="background-color:purple;">\n    6\n   </td>\n   <td style="background-color:indigo;">\n    7\n   </td>\n   <td style="background-color:darkgreen;">\n    8\n   </td>\n   <td style="background-color:darkblue;">\n    9\n   </td>\n   <td style="background-color:purple;">\n    10\n   </td>\n   <td style="background-color:indigo;">\n    11\n   </td>\n   <td style="background-color:darkgreen;">\n    12\n   </td>\n   <td style="background-color:darkblue;">\n    13\n   </td>\n   <td style="background-color:purple;">\n    14\n   </td>\n   <td style="background-color:indigo;">\n    15\n   </td>\n  </tr>\n </table>\n</div>\n<p>\n would zigzag into the following formation\n</p>\n<div class="flex-container">\n <div class="container-item">\n  <table class="map">\n   <tr>\n    <td style="background-color:darkgreen;">\n     0\n    </td>\n    <td style="background-color:darkblue">\n     1\n    </td>\n    <td style="background-color:darkblue">\n     5\n    </td>\n    <td style="background-color:purple;">\n     6\n    </td>\n   </tr>\n   <tr>\n    <td style="background-color:purple;">\n     2\n    </td>\n    <td style="background-color:darkgreen">\n     4\n    </td>\n    <td style="background-color:indigo">\n     7\n    </td>\n    <td style="background-color:darkgreen;">\n     12\n    </td>\n   </tr>\n   <tr>\n    <td style="background-color:indigo;">\n     3\n    </td>\n    <td style="background-color:darkgreen">\n     8\n    </td>\n    <td style="background-color:indigo">\n     11\n    </td>\n    <td style="background-color:darkblue;">\n     13\n    </td>\n   </tr>\n   <tr>\n    <td style="background-color:darkblue;">\n     9\n    </td>\n    <td style="background-color:purple">\n     10\n    </td>\n    <td style="background-color:purple">\n     14\n    </td>\n    <td style="background-color:indigo;">\n     15\n    </td>\n   </tr>\n  </table>\n </div>\n <div class="spacer">\n  <span class="b lg">\n   or\n  </span>\n </div>\n <div class="container-item">\n  <img class="smallpic" src="../static/images/05/lineb.png"/>\n </div>\n</div>',
                        instructions='Your extruded wire (same as Part 1):',
                        input_type='png',
                        form='<label class="main" for="answer2">\n How many liters of diamond gas were harvested?\n <br/>\n</label>\n<input autocomplete="off" name="answer2" placeholder="..." type="text"/>\n<button>\n Submit\n</button>',
                        solution='<label class="main">\n Your answer was\n <span class="b i">\n  958013\n </span>\n .\n</label>',
                    ),
                    SubEntry(
                        main_entry_id=6,
                        sub_entry_id=1,
                        title='Here Comes a Sun',
                        content='<p>\n Today\'s assignment is in the\n <a href="https://en.wikipedia.org/wiki/Thermal_management_(electronics)">\n  Thermal Defense\n </a>\n Room. This room serves as the ship\'s primary defense against the\n            unforgiving natural perils of space—extreme heat and harmful\n <a href="https://en.wikipedia.org/wiki/Radiation">\n  radiation\n </a>\n .\n</p>\n<p>\n In space, the ship is constantly bombarded with\n <span class="b i">\n  waves\n            of different frequencies and wavelengths\n </span>\n . Some of these waves,\n            called\n <span class="b i">\n  Solar Waves, are damaging\n </span>\n to the structure\n            of the ship, while others, called\n <span class="b i">\n  Comic Waves, are harmless\n </span>\n .\n</p>\n<p>\n The ship has a Thermal Defense system in place, but it works best when\n            it is specifically targeted at harmful Solar Waves.\n</p>\n<p>\n A\n <a href="https://en.wikipedia.org/wiki/Comma-separated_values">\n  CSV\n </a>\n database is already on file, recording data about the individual frequencies\n            and wavelengths of previously intercepted waves. However,\n <span class="b i">\n  some incoming waves have a combination of frequency and wavelength that has\n            not yet been classified\n </span>\n .\n</p>\n<p>\n Your job is to\n <span class="b i">\n  determine if these waves are harmful\n </span>\n Solar Waves or harmless Cosmic Waves. To do so, you should find\n <span class="b i">\n  the 7 nearest known waves\n </span>\n from the database.\n</p>\n<p>\n The distance between waves is determined by graphing the coordinates, with\n <span class="b i">\n  frequency representing the x-axis\n </span>\n and\n <span class="b i">\n  wavelength representing the y-axis\n </span>\n .\n</p>\n<div class="imgcontainer">\n <img class="pad" src="../static/images/06/euclidian1.png"/>\n</div>\nThe\n<span class="b i">\n <a href="https://en.wikipedia.org/wiki/Euclidean_distance">\n  Euclidean Distance Formula\n </a>\n</span>\n(above) is then used to gauge how near or far one point is from\n            another. The majority type among the 7 closest neighbors of a new wave will\n            determine whether that new wave is a Solar Wave or a Cosmic Wave.\n<p>\n The data provided, your puzzle input, consists of a\n <span class="b i">\n  single\n            line of new waves\n </span>\n , with each wave represented by its frequency and\n            wavelength separated by a comma, and\n <span class="b i">\n  individual waves\n            separated by spaces\n </span>\n . Following this line are\n <span class="b i">\n  several\n            lines in a CSV format\n </span>\n , providing a\n <span class="b i">\n  database of\n            known waves\n </span>\n . In this CSV structure, the first column is "frequency",\n            the second column is "wavelength", and the third column is "type". Determine\n            whether each new wave is a Solar Wave (\n <span class="b i">\n  S\n </span>\n ) or a\n            Cosmic Wave (\n <span class="b i">\n  C\n </span>\n ), and concatenate these results\n            without spaces into an\n <span class="b i">\n  uppercase five-character output\n </span>\n .\n</p>\n<h4>\n For example:\n</h4>\n<p>\n Your unknown waves are\n <span class="code part">\n  (9,2) (6,4) (3,5)\n </span>\n <br/>\n and your database consists of\n <span class="code free">\n  frequency,wavelength,type\n  <br/>\n  10,7,Cosmic\n  <br/>\n  9,1,Solar\n  <br/>\n  7,2,Solar\n  <br/>\n  8,3,Cosmic\n  <br/>\n  10,2,Solar\n  <br/>\n  9,3,Solar\n  <br/>\n  1,5,Cosmic\n  <br/>\n  4,5,Cosmic\n  <br/>\n  9,4,Solar\n  <br/>\n  3,3,Solar\n </span>\n</p>\n<p>\n To find the distance for the first unknown wave (9,2) to the first wave in\n            the database (10,7), you would apply the formula, taking the sum of the \n            difference of the Xs squared and the difference of the Ys squared:\n <br/>\n <span class="code part">\n  √( (10-9)² + (7-2)² )  =  √( 1² + 5² )  =  √( 1 + 25 )  =\n  <br/>\n  √( 26 )  =  5.099\n </span>\n</p>\n<p>\n So the distance between the first unknown target wave and the known Cosmic\n            wave at (10,7) is\n <span class="code part">\n  5.099\n </span>\n</p>\n<p>\n Applying this formula to every wave in the database you get:\n <span class="code free">\n  frequency,wavelength,type,\n  <span class="b">\n   distance\n  </span>\n  <br/>\n  10,7,Cosmic,\n  <span class="b">\n   5.099\n  </span>\n  <br/>\n  9,1,Solar,\n  <span class="b">\n   1.000\n  </span>\n  <br/>\n  7,2,Solar,\n  <span class="b">\n   2.000\n  </span>\n  <br/>\n  8,3,Cosmic,\n  <span class="b">\n   1.414\n  </span>\n  <br/>\n  10,2,Solar,\n  <span class="b">\n   1.000\n  </span>\n  <br/>\n  9,3,Solar,\n  <span class="b">\n   1.000\n  </span>\n  <br/>\n  1,5,Cosmic,\n  <span class="b">\n   8.544\n  </span>\n  <br/>\n  4,5,Cosmic,\n  <span class="b">\n   5.830\n  </span>\n  <br/>\n  9,4,Solar,\n  <span class="b">\n   2.000\n  </span>\n  <br/>\n  3,3,Solar,\n  <span class="b">\n   6.082\n  </span>\n </span>\n Since you have such a small amount of data in this example, let\'s only look at\n            the\n <span class="b i">\n  3 nearest neighbors\n </span>\n . These would be\n <ol>\n  <li>\n   Solar Wave at (9,1)\n  </li>\n  <li>\n   Solar Wave at (10,2)\n  </li>\n  <li>\n   Solar Wave at (9,3)\n  </li>\n </ol>\n Majority wins (and in this case all neighbors are the same type) so the unknown\n            wave at (9,2) is Solar, or\n <span class="code part">\n  S\n </span>\n .\n</p>\n<p>\n Repeating the same process for all the unknown waves, you get\n <ol>\n  <li>\n   for (9,2): Solar, Solar, Solar =\n   <span class="b i">\n    S\n   </span>\n  </li>\n  <li>\n   for (6,4): Cosmic, Cosmic, Solar =\n   <span class="b i">\n    C\n   </span>\n  </li>\n  <li>\n   for (3,5): Cosmic, Cosmic, Solar =\n   <span class="b i">\n    C\n   </span>\n  </li>\n </ol>\n So our uppercase output would be\n <span class="code part">\n  SCC\n </span>\n</p>',
                        instructions='Here is your data...',
                        input_type='txt',
                        form='<label class="main" for="answer1">\n What is the five-character output?\n <br/>\n</label>\n<input autocomplete="off" name="answer1" placeholder="..." type="text"/>\n<button>\n Submit\n</button>',
                        solution='<label class="main">\n Your answer was\n <span class="b i">\n  SSCSC\n </span>\n .\n</label>',
                    ),
                    SubEntry(
                        main_entry_id=6,
                        sub_entry_id=2,
                        title='Missing Mystery Part',
                        content='<p>\n You have successfully isolated some harmful Solar Waves and are ready to\n <span class="b i">\n  direct the Thermal Defense System (TDS) at them\n </span>\n , but\n            the diagnostic panel indicates a\n <span class="b i">\n  critical malfunction\n </span>\n .\n            This malfunction has caused the system to be unable to repair itself or provide\n            you with definitive information about the broken part.\n</p>\n<p>\n The entire TDS comprises\n <span class="b i">\n  multiple types of\n  <a href="https://www.merriam-webster.com/dictionary/bespoke">\n   bespoke\n  </a>\n  parts\n </span>\n ,\n            each designed for different levels of radiation protection and thermal management.\n            Because many different parts share similar qualities, it is difficult to determine\n            the exact replacement needed.\n</p>\n<p>\n In the parts storage, you\n <span class="b i">\n  find a replacement part\n </span>\n that\n            matches some of the specifications of the broken shield. However, the\n            specifications alone—\n <span class="b i">\n  mass, density, thickness, area, and\n            radiation output\n </span>\n —are insufficient to confirm the exact type of shield.\n            This is because various shield types might have similar physical characteristics\n            but different performance metrics and configurations.\n</p>\n<p>\n To determine what this unknown part is, you must\n <span class="b i">\n  compare it with\n            all the parts in the database\n </span>\n in terms of how far off it is from each part\n            on record. We can gauge this similarity\n <span class="b i">\n  using Euclidean\n            distance\n </span>\n . However, since there are\n <span class="b i">\n  more than two \n            dimensions\n </span>\n to each part, you need to use a more robust equation with\n <span class="code part">\n  q\n </span>\n representing the target\'s value and\n <span class="code part">\n  p\n </span>\n representing the value from the database you are\n            comparing it to.\n</p>\n<div class="imgcontainer">\n <img class="midpic" src="../static/images/06/euclidian2.png"/>\n</div>\n<p>\n Similar to how you sorted the waves, you need to look at\n <span class="b i">\n  the 7 TDS\n            parts nearest to the mystery part\n </span>\n to determine its purpose based on the\n            majority of its\n <span class="b i">\n  nearest neighbors\n </span>\n .\n</p>\n<p>\n Your data consists of a first line, the specifications of the mystery part,\n            separated by commas, followed by the database of known parts in CSV format with\n            columns for mass, density, thickness, area, radiation output, and type.\n</p>\n<h4>\n For example:\n</h4>\n<p>\n If your mystery part, the target (\n <span class="b i">\n  q\n </span>\n ), has the values\n <span class="code free">\n  mass,density,thickness,area,radiation_output\n  <br/>\n  12.5,31.22,3.402,2.0,0.053\n </span>\n and you want to find its distance compared to this\n            "\n <span class="b i">\n  Boron\xa0Nitride\xa0Nanotube\xa0Composite\n </span>\n "\n            part in the database\n            (\n <span class="b i">\n  p\n </span>\n )\n <span class="code free">\n  mass,density,thickness,area,radiation_output\n  <br/>\n  15.9,10.6,4.47,2.79,0.451\n </span>\n</p>\n<p>\n Following the Euclidean distance formula above, you need the square root of the\n            sum of all the differences squared.\n <ol>\n  <li>\n   mass\n  </li>\n  <ul>\n   <li>\n    <span class="code part">\n     (12.5 - 15.9)² = 11.56\n    </span>\n   </li>\n  </ul>\n  <li>\n   density\n  </li>\n  <ul>\n   <li>\n    <span class="code part">\n     (31.22 - 10.6)² = 425.1844\n    </span>\n   </li>\n  </ul>\n  <li>\n   thickness\n  </li>\n  <ul>\n   <li>\n    <span class="code part">\n     (3.402 - 4.47)² = 1.1406\n    </span>\n   </li>\n  </ul>\n  <li>\n   area\n  </li>\n  <ul>\n   <li>\n    <span class="code part">\n     (2.0 - 2.79)² = 0.6241\n    </span>\n   </li>\n  </ul>\n  <li>\n   radiation output\n  </li>\n  <ul>\n   <li>\n    <span class="code part">\n     (0.053 - 0.451)² = 0.1584\n    </span>\n   </li>\n  </ul>\n </ol>\n</p>\n<p>\n You take the square root of the sum of these totals\n <span class="code part">\n  √( 11.56 + 425.1844 + 1.1406 + 0.6241 + 0.1584 )  =\n  <br/>\n  √( 438.6675 )  =  20.9443\n </span>\n</p>\n<p>\n The distance between the mystery part in the example and the one\n            Boron\xa0Nitride\xa0Nanotube\xa0Composite part is\n <span class="code part">\n  20.9443\n </span>\n .\n</p>\n<p>\n The following process is the same as you did in Part 1, finding the\n <span class="b i">\n  7 nearest neighbors\n </span>\n of your mystery part to\n            determine its type.\n</p>',
                        instructions='Here is your data...',
                        input_type='txt',
                        form='<label class="main" for="answer2">\n What is the mystery part?\n <br/>\n</label>\n<input autocomplete="off" name="answer2" placeholder="..." type="text"/>\n<button>\n Submit\n</button>',
                        solution='<label class="main">\n Your answer was\n <span class="b i">\n  ZIRCONIUM DIOXIDE CERAMIC HEAT SINK\n </span>\n .\n</label>',
                    ),
                    SubEntry(
                        main_entry_id=7,
                        sub_entry_id=1,
                        title='Pharma-geddon',
                        content='<p>\n After a few days of high-tension work in other areas of the ship, you put in a request\n            for a more laid-back task. Helping to organize the inventory in the\n <a href="https://en.wikipedia.org/wiki/Sick_bay">\n  Sick Bay\n </a>\n sounds like a great,\n            mindless task that you can relax by doing.\n</p>\n<p>\n As seems to be your usual misfortune, you arrive to yet another tableau of stress and\n            confusion. The medical officer has just put in\n <span class="b i">\n  an order for some\n            medical supplies\n </span>\n , but someone has lost the reference sheet for the inventory.\n            Without the\n <span class="b i">\n  four-symbol code\n </span>\n for each item, you cannot\n            retrieve it from the\n <a href="https://en.wikipedia.org/wiki/Vending_machine">\n  auto-vending\n            storage\n </a>\n .\n</p>\n<p>\n The only files that are found are\n <span class="b i">\n  an inventory, listing the name and\n            quantity of each supply\n </span>\n , and\n <span class="b i">\n  a raw data file, your input puzzle,\n            that stores the entire\n  <a href="https://docs.python.org/3/library/collections.html">\n   collections\n  </a>\n  of medical supplies\n </span>\n . As these items were entered into the ship\'s inventory in no\n            particular order, their four-symbol codes were\n <a href="https://en.wikipedia.org/wiki/Concatenation">\n  concatenated\n </a>\n onto the raw data\n            file\n <span class="b i">\n  with no separator\n </span>\n .\n</p>\n<p>\n You are asked if you know of any\n <a href="https://docs.python.org/3/library/collections.html#collections.Counter">\n  Counter\n </a>\n that can process this raw data file and\n <span class="b i">\n  tell you the number of appearances\n            of all the four-symbol codes\n </span>\n . Then you can cross-check it with the plain text inventory.\n</p>\n<p>\n Using the raw data file,\n <span class="b i">\n  find each four-symbol code that appears the number\n            of times corresponding to each item\'s quantity\n </span>\n . Print these codes\n <span class="b i">\n  next to each other without any spaces\n </span>\n to retrieve them from the storage.\n</p>\n<h4>\n For example:\n</h4>\n<p>\n If your raw data file looks like\n <span class="code free">\n  **_#@$%&amp;()[]#?!)()[]#?!)()[]()[]@$%&amp;@$%&amp;()[]()[]()[]()[]@$%&amp;@$%&amp;#?!)**_#**_#@$%&amp;#?!)\n            &lt;/span&gt;\n            We can see\n            &lt;ul&gt;\n                &lt;li&gt;8 occurrences of  &lt;span class="code part"&gt;()[]&lt;/span&gt;&lt;/li&gt;\n                &lt;li&gt;6 occurrences of &lt;span class="code part"&gt;@$%&amp;&lt;/span&gt;&lt;/li&gt;\n                &lt;li&gt;4 occurrences of &lt;span class="code part"&gt;#?!)&lt;/span&gt;&lt;/li&gt;\n                &lt;li&gt;3 occurrences of &lt;span class="code part"&gt;**_#&lt;/span&gt;&lt;/li&gt;\n            &lt;/ul&gt;\n        &lt;/p&gt;\n        &lt;p&gt;\n            If the plain text inventory tells you there are 8 hypodermic needles and 4 plaster casts,\n            You can determine from your count that the four-symbol code for hypodermic needles is\n            &lt;span class="code part"&gt;()[]&lt;/span&gt; and the four-symbol code for plaster casts is\n            &lt;span class="code part"&gt;#?!)&lt;/span&gt;.\n        &lt;/p&gt;\n        &lt;p&gt;\n            To get these items from the storage, you will input &lt;span class="code part"&gt;()[]#?!)&lt;/span&gt;.\n        &lt;/p&gt;\n </span>\n</p>',
                        instructions='The medical officer has requested bandages,\n    healing serum, and antacids.\n<p class="main">\n Plain text inventory:\n <span class="code free main">\n  •\n  <span class="b i main">\n   1081\n  </span>\n  packages of standard adhesive bandages\n  <br/>\n  •\n  <span class="b i main">\n   1055\n  </span>\n  bottles of\n    "InstaHeal" combination disinfectant and wound\n    closure serum\n  <br/>\n  •\n  <span class="b i main">\n   965\n  </span>\n  blister packs\n    of "Yucky Tummy No More" chewable antacids\n </span>\n Raw data file:\n</p>',
                        input_type='txt',
                        form='<label class="main" for="answer1">\n What is the code to retrieve these three items?\n <br/>\n</label>\n<input autocomplete="off" name="answer1" placeholder="..." type="text"/>\n<button>\n Submit\n</button>',
                        solution='<label class="main">\n Your answer was\n <span class="b i">\n  &lt;({%=!+`&lt;%{&gt;\n </span>\n .\n</label>',
                    ),
                    SubEntry(
                        main_entry_id=7,
                        sub_entry_id=2,
                        title='Have a Proper Gander',
                        content='<p>\n With that crisis averted, the rest of your day goes by pretty smoothly as you help your\n            shipmates reorganize the inventory. Suddenly, out of the corner of your eye, you\n <span class="b i">\n  spot a small colorful piece of paper\n </span>\n .\n</p>\n<div class="imgcontainer">\n <img class="fill" src="../static/images/07/propoganda.png"/>\n</div>\n<p>\n Picking it up, you immediately recognize it as\n <span class="b i">\n  Aurawrought\n  <a href="https://en.wikipedia.org/wiki/Propaganda">\n   propaganda\n  </a>\n </span>\n that someone aboard the ship must have sneaked in. The Aurawrought race are \n            eerie luminous entities from The Veil of First Light, a shifting nebula at the \n            edge of known space where time bends strangely. You\'ve learned in your \n            orientation, prior to boarding the ship, that their once-distant movements \n            have grown calculated, their murmurs in the cosmic dark turning to \n            proclamations. This mission you\'re on, with the crew of STS Solara, is to \n            investigate and likely stop what they are planning.\n</p>\n<p>\n Could there be a\n <a href="https://en.wikipedia.org/wiki/Treason">\n  traitor\n </a>\n amongst us who has brought this paper on board?\n</p>\n<p>\n Call it a\n <a href="https://en.wikipedia.org/wiki/Intuition">\n  hunch\n </a>\n , but you \n            notice something very funny about the\n <span class="b i">\n  colors of the eyes\n </span>\n on the page. It looks like someone has colored them in. Luckily, there \n            is a\n <span class="b i">\n  Propaganda Inspecting LumiCam (PIL)\n </span>\n app built\n            into your holographic tablet, designed to\n <span class="b i">\n  scan images for \n            color\n </span>\n .\n</p>\n<p>\n To uncover the\n <span class="b i">\n  hidden message\n </span>\n , you need to program it to act as a\n <a href="https://docs.python.org/3/library/collections.html#collections.Counter">\n  Counter\n </a>\n for each pixel color you scan. You decide on a quick course of action.\n</p>\n<div class="shadow pad">\n <ol>\n  <li>\n   Scan the Image\n  </li>\n  <ul>\n   <li>\n    Use your PIL app to scan the strange colors from the eyes of the \n                        image (your puzzle input)\n   </li>\n  </ul>\n  <li>\n   Count the Colors\n  </li>\n  <ul>\n   <li>\n    The app should count each color pixel and provide you with a list of RGB tuples\n                        for the top three most frequent colors\n   </li>\n  </ul>\n  <li>\n   Convert Hex Values\n  </li>\n  <ul>\n   <li>\n    Convert the RGB tuples to hex color values and then change all of the digits to\n                        their closest uppercase letter using the following mapping:\n    <br/>\n    <span class="b i">\n     0=O, 1=I, 2=Z, 3=E, 4=A, 5=S, 6=G, 7=T, 8=B, and 9=P\n    </span>\n   </li>\n  </ul>\n </ol>\n</div>\n<p>\n The resulting\n <span class="b i">\n  six letter words from the top three hex color values\n </span>\n will reveal the secret message hidden inside the propaganda paper.\n</p>\n<h4>\n For example:\n</h4>\n<p>\n Using the image\n</p>\n<div class="imgcontainer">\n <img class="midpic" src="../static/images/07/sample.png"/>\n</div>\n<p>\n We get the following counts for pixel colors\n <span class="code free">\n  (255, 255, 255): 2183\n  <br/>\n  (\xa0\xa00, \xa0\xa00, \xa0\xa00): 1917\n  <br/>\n  (176, 209, 229): 10000\n  <br/>\n  (190, 173, 237): 10000\n  <br/>\n  (222, 202, 222): 10000\n </span>\n</p>\n<div class="flex-container">\n <div class="container-item pad">\n  Converting the top 3\n  <br/>\n  colors to hex values\n  <span class="code free">\n   #B0D1E5\n   <br/>\n   #BEADED\n   <br/>\n   #DECADE\n  </span>\n </div>\n <div class="container-item pad">\n  and changing the digits\n  <br/>\n  to uppercase letters\n  <span class="code free">\n   BODIES\n   <br/>\n   BEADED\n   <br/>\n   DECADE\n  </span>\n </div>\n</div>\n<p>\n The secret message becomes\n <span class="code part">\n  BODIES BEADED DECADE\n </span>\n .\n</p>',
                        instructions='Here is a section of just the eye colors from the propaganda paper:',
                        input_type='png',
                        form='<label class="main" for="answer2">\n What is the secret message?\n <br/>\n</label>\n<input autocomplete="off" name="answer2" placeholder="..." type="text"/>\n<button>\n Submit\n</button>',
                        solution='<label class="main">\n Your answer was\n <span class="b i">\n  ACCESS OFFICE COFFEE\n </span>\n .\n</label>',
                    ),
                    SubEntry(
                        main_entry_id=8,
                        sub_entry_id=1,
                        title='Full of Beans',
                        content='<p>\n That was an odd message. What could that mean? The only place aboard the ship \n            to get a cup of coffee is the coffee machine in the Crew Quarters\' common \n            room. No one\'s around so you put the propaganda paper down on the table and \n            start to make a cup for yourself.\n</p>\n<p>\n Suddenly, you hear a small high-pitched voice behind you. Turning around,\n            you see what looks like a small Aurawrought being, about 20cm tall.\n</p>\n<div class="imgcontainer">\n <img class="smallpic" src="../static/images/08/defector.png"/>\n</div>\n<p>\n You whip around, keeping an eye out for some sort of weapon you can use, all \n            while trying not to break eye contact with the creature. Sensing your \n            distress, it quickly tells you that it has come in peace, explaining further \n            that it is a\n <a href="https://en.wikipedia.org/wiki/Defection">\n  defector\n </a>\n from the Aurawrought army. It left the propaganda on the ship in hopes someone \n            would find it and get in touch because it has important information to share.\n</p>\n<p>\n The Aurawrought have long devoted themselves to Eos, goddess of the \n            dawn, and have lamented her imprisonment in the galactic vortex where she \n            has been held for centuries. Recently, however, the scientists among the \n            Aurawrought have come up with a means to free her. This defector insists that \n            it does not share the zealotry of its fellow Aurawroughts and wants your help \n            to stop its brethren from unleashing a dangerous deity onto the universe.\n            You are skeptical, but something in its demeanor convinces you to trust \n            it. The tiny defector says it needs to prepare some documents for you—\n <span class="b i">\n  a map\n </span>\n to travel directly to the Aurawroughts, \n            avoiding their army\'s entire fleet, and\n <span class="b i">\n  the blueprints of \n            the technology\n </span>\n they are planning to use to free Eos. It promises to be \n            in touch soon and asks you to wait for it to return with the paperwork.\n</p>\n<hr/>\n<p>\n In the meantime, you look around at the state of the common area. A new\n            shipment of coffee beans had arrived just in time, as there was nothing left\n            from the old shipment besides the handful of beans inside the machine. All\n            the bags of coffee beans are wrapped up in\n <a href="https://en.wikipedia.org/wiki/Knapsack_problem">\n  knapsacks\n </a>\n waiting\n            to be shelved. To kill time, you decide to take some initiative and\n <span class="b i">\n  stock some coffee\n </span>\n .\n</p>\n<p>\n There are\n <span class="b i">\n  100 bags of coffee beans in varying sizes\n </span>\n from all over Earth, and they will not all fit on the shelf. You scan the\n            inventory list with your holographic tablet and see a comma-separated document\n            of the shipment, which shows the\n <span class="b i">\n  country, bean type, roast,\n            width of the bag, and popularity rating\n </span>\n —your puzzle input. You should:\n</p>\n<ol>\n <li>\n  <span class="b i">\n   Create a Class for Coffee Bags:\n  </span>\n </li>\n <ul>\n  Define a class to represent each coffee bag with properties for country,\n                bean type, roast, width, and popularity rating.\n </ul>\n <li>\n  <span class="b i">\n   Create a Class for the Shelf:\n  </span>\n </li>\n <ul>\n  Define a class for the shelf that can\n  <span class="b i">\n   store a certain\n                number of bags\n  </span>\n  and has a limited width.\n </ul>\n <li>\n  <span class="b i">\n   Stock the Shelf Efficiently:\n  </span>\n </li>\n <ul>\n  Implement a method to store the coffee bags on the shelf with\n  <span class="b i">\n   the best possible popularity rating while minimizing\n                wasted space\n  </span>\n  .\n </ul>\n</ol>\n<p>\n By organizing the coffee bags this way, you can ensure that the shelf is\n            stocked with the best selection for the crew.\n</p>\n<h4>\n For example, look at a small shelf of\n <span class="code part">\n  70\n </span>\n mm:\n</h4>\n<p>\n If you have the following inventory\n <span class="code free">\n  country,bean,roast,width,rating\n  <br/>\n  Jamaica,Arabica,Light Roast,40,5\n  <br/>\n  Brazil,Robusta,French Roast,20,3\n  <br/>\n  Columbia,Typica,French Roast,30,4\n  <br/>\n  Uganda,Arabica,Vienna Roast,10,2\n  <br/>\n  Mexico,MundoNovo,Cinnamon Roast,30,2\n </span>\n To minimize wasted space you should fill the shelf with coffee bags totaling\n            as close to 70mm as possible.\n</p>\n<p>\n Several combinations are possible: Choosing the coffees from\n <span class="b i">\n  Jamaica and Columbia\n </span>\n total 70mm.\n <span class="b i">\n  Jamaica and Mexico\n </span>\n too. Additionally smaller bags\n            can total up to 70mm like the bags from\n <span class="b i">\n  Columbia, Uganda,\n            and Mexico\n </span>\n . With so many options, it is simply a matter of choosing\n            the option\n <span class="b i">\n  which results in the greatest total popularity\n            rating\n </span>\n .\n</p>\n<div class="imgcontainer">\n <table>\n  <tr>\n   <th>\n    Coffee Bags\n   </th>\n   <th>\n    Total Width\n   </th>\n   <th>\n    Total Rating\n   </th>\n  </tr>\n  <tbody class="P2">\n   <tr>\n    <td>\n     Jamaica+Columbia\n    </td>\n    <td>\n     70\n    </td>\n    <td>\n     9\n    </td>\n   </tr>\n   <tr>\n    <td>\n     Jamaica+Mexico\n    </td>\n    <td>\n     70\n    </td>\n    <td>\n     7\n    </td>\n   </tr>\n   <tr>\n    <td>\n     Columbia+Uganda+Mexico\n    </td>\n    <td>\n     70\n    </td>\n    <td>\n     8\n    </td>\n   </tr>\n   <tr>\n    <td>\n     Jamaica+Brazil\n    </td>\n    <td>\n     60\n    </td>\n    <td>\n     8\n    </td>\n   </tr>\n   <tr>\n    <td>\n     Brazil+Uganda+Mexico\n    </td>\n    <td>\n     60\n    </td>\n    <td>\n     7\n    </td>\n   </tr>\n   <tr>\n    <td class="select">\n     Jamaica+Brazil+Uganda\n    </td>\n    <td class="select">\n     70\n    </td>\n    <td class="select">\n     10\n    </td>\n   </tr>\n   <tr>\n    <td>\n     Brazil+Columbia+Uganda\n    </td>\n    <td>\n     60\n    </td>\n    <td>\n     9\n    </td>\n   </tr>\n   <tr>\n    <td>\n     Columbia+Mexico\n    </td>\n    <td>\n     60\n    </td>\n    <td>\n     6\n    </td>\n   </tr>\n  </tbody>\n </table>\n</div>\n<p>\n Although several combinations fill the shelf close to 70mm, The\n            combination of\n <span class="b i">\n  Jamaica Arabica Light Roast, Brazil\n                Robusta Dark Roast, Uganda Arabica French Roast\n </span>\n have the best\n                total popularity rating of\n <span class="code part">\n  10\n </span>\n .\n</p>',
                        instructions='Your shelf is\n<span class="main code part">\n 500\n</span>\ncm wide.\n<br/>\nHere is the inventory of all the coffee beans:',
                        input_type='txt',
                        form='<label class="main" for="answer1">\n What is the sum of the popularity ratings?\n <br/>\n</label>\n<input autocomplete="off" name="answer1" placeholder="..." type="text"/>\n<button>\n Submit\n</button>',
                        solution='<label class="main">\n Your answer was\n <span class="b i">\n  653\n </span>\n .\n</label>',
                    ),
                    SubEntry(
                        main_entry_id=8,
                        sub_entry_id=2,
                        title='Bean Around the World',
                        content='<p>\n After finishing stocking one shelf, you look around for the Aurawrought \n            defector. Come to think of it, it didn\'t specify how soon it would be back, if \n            at all today. You still have some time to kill before calling it a night, so \n            you decide to\n <span class="b i">\n  stock the rest of the shelves\n </span>\n .\n</p>\n<p>\n Looking over the stocking job you just completed, you realize that\n <span class="b i">\n  you could put even more effort into assuring a wide variety\n </span>\n of coffee bags on the shelves. You decide to further constrain your selections so there\n            are\n <span class="b i">\n  no duplicate bean types and no duplicate roasts\n </span>\n on each\n            shelf. This might decrease the overall popularity rating, but it will ensure that there\n            is a more varied selection for the crew.\n</p>\n<p>\n This ship seems to have been designed with a limited budget for aesthetics, as the\n            three available\n <span class="b i">\n  shelves are all different lengths\n </span>\n . Keeping in\n            mind your new restrictions about bean types and roasts for each shelf,\n <span class="b i">\n  restock all three shelves\n </span>\n . You should use the previously created\n            classes for Coffee Bags and Shelves, adjusted if necessary to your new requirements.\n</p>\n<p>\n Once the three shelves are stocked, you can return to your bunk to sleep.\n</p>\n<h4>\n For example:\n</h4>\n<p>\n Using the same shelf and inventory from Part 1\'s example, the answer you arrived at is\n            no longer the best because there is not enough variation.\n <span class="b i">\n  There are two bags of Arabica beans\n </span>\n on the shelf.\n <span class="b i">\n  Removing combinations where there are duplicate bean types, or\n            duplicate roasts\n </span>\n gives you fewer coffee bag combinations to consider.\n</p>\n<div class="imgcontainer">\n <table>\n  <tr>\n   <th>\n    Coffee Bags\n   </th>\n   <th>\n    Total Width\n   </th>\n   <th>\n    Total Rating\n   </th>\n   <th>\n    Reason Removed\n   </th>\n  </tr>\n  <tbody class="P2">\n   <tr>\n    <td class="select">\n     Jamaica+Columbia\n    </td>\n    <td class="select">\n     70\n    </td>\n    <td class="select">\n     9\n    </td>\n    <td>\n    </td>\n   </tr>\n   <tr>\n    <td>\n     Jamaica+Mexico\n    </td>\n    <td>\n     70\n    </td>\n    <td>\n     7\n    </td>\n    <td>\n    </td>\n   </tr>\n   <tr>\n    <td>\n     Columbia+Uganda+Mexico\n    </td>\n    <td>\n     70\n    </td>\n    <td>\n     8\n    </td>\n    <td>\n    </td>\n   </tr>\n   <tr>\n    <td>\n     Jamaica+Brazil\n    </td>\n    <td>\n     60\n    </td>\n    <td>\n     8\n    </td>\n    <td>\n    </td>\n   </tr>\n   <tr>\n    <td>\n     Brazil+Uganda+Mexico\n    </td>\n    <td>\n     60\n    </td>\n    <td>\n     7\n    </td>\n    <td>\n    </td>\n   </tr>\n   <tr>\n    <td class="cross">\n     Jamaica+Brazil+Uganda\n    </td>\n    <td class="cross">\n     70\n    </td>\n    <td class="cross">\n     10\n    </td>\n    <td>\n     Same Bean\n    </td>\n   </tr>\n   <tr>\n    <td class="cross">\n     Brazil+Columbia+Uganda\n    </td>\n    <td class="cross">\n     60\n    </td>\n    <td class="cross">\n     9\n    </td>\n    <td>\n     Same Roast\n    </td>\n   </tr>\n   <tr>\n    <td>\n     Columbia+Mexico\n    </td>\n    <td>\n     60\n    </td>\n    <td>\n     6\n    </td>\n    <td>\n    </td>\n   </tr>\n  </tbody>\n </table>\n</div>\n<p>\n Remember to now repeat the process of filling a shelf with coffee bags of \n            varying bean types and roasts for all three shelves. You cannot use the same \n            bag on more than one shelf but you also do not need to worry about the bean \n            types and roasts of the other shelves.\n <span class="b i">\n  Restrictions for bean \n            type and roast only apply to the coffee bags on each shelf \n            individually\n </span>\n , not all the shelves as a whole.\n</p>',
                        instructions='Your three shelves are\n<span class="main code part">\n 500, 415, 495\n</span>\ncm wide.\n<br/>\nHere is the inventory of all the coffee beans\n<br/>\n<span class="main sm">\n (same input as Part 1)\n</span>\n:',
                        input_type='txt',
                        form='<label class="main" for="answer2">\n What is the sum of the popularity ratings for all shelves?\n <br/>\n</label>\n<input autocomplete="off" name="answer2" placeholder="..." type="text"/>\n<button>\n Submit\n</button>',
                        solution='<label class="main">\n Your answer was\n <span class="b i">\n  1603\n </span>\n .\n</label>',
                    ),
                    SubEntry(
                        main_entry_id=9,
                        sub_entry_id=1,
                        title='Get Us Outta Here',
                        content='<p>\n You wake up to find the Aurawrought defector standing far too close to your\n            face, staring at you intently. Startled, you nearly leap to the opposite end \n            of your bunk. Clearly, these beings are not familiar with the concepts of\n            privacy or\n <a href="https://en.wikipedia.org/wiki/Proxemics">\n  personal \n            space\n </a>\n . It proudly announces that it\'s finished with the\n <span class="b i">\n  map to the Aurawroughts\n </span>\n and hands you a piece of paper, your puzzle input. However, instead of\n            containing any legible coordinates or paths, it has\n <span class="b i">\n  a list\n            of\n  <a href="https://en.wikipedia.org/wiki/Node_(computer_science)">\n   nodes\n  </a>\n  and their connections\n </span>\n .\n</p>\n<p>\n The defector explains that the path to the Aurawroughts must first cross a\n <a href="https://en.wikipedia.org/wiki/Nebula">\n  Nebula\n </a>\n <a href="https://en.wikipedia.org/wiki/Labyrinth">\n  Labyrinth\n </a>\n , riddled with\n            electromagnetic storms.\n <span class="b i">\n  The node system reveals the paths\n            that avoid the storms\n </span>\n , guiding the ship safely outside the Nebula \n            Labyrinth.\n</p>\n<p>\n You realize you need to take this information to Captain Xarlos on the\n <a href="https://en.wikipedia.org/wiki/Bridge_(nautical)">\n  Bridge\n </a>\n , but\n            first, you must make sense of this strange system. Your task is to scour the\n <span class="b i lg">\n  depths\n </span>\n of the Nebula Labyrinth and find\n <span class="b i">\n  the safest path through the storms\n </span>\n .\n</p>\n<p>\n Your paper contains\n</p>\n<ul>\n <li>\n  <span class="b i">\n   First Line\n  </span>\n </li>\n <ul>\n  <li>\n   The\n   <span class="b i">\n    starting node and ending node\n   </span>\n   ,\n                    separated by a comma.\n  </li>\n  <li>\n   This represents the ship\'s current location and the exit of\n                    the Nebula Labyrinth.\n  </li>\n </ul>\n <li class="pad">\n  <span class="b i">\n   Subsequent Lines\n  </span>\n </li>\n <ul>\n  <li>\n   All the\n   <span class="b i">\n    nodes and their connections, separated\n                    by colons\n   </span>\n   .\n   <br/>\n   (node:connection)\n  </li>\n  <li>\n   Each node-connection combination is on its own line.\n  </li>\n  <li>\n   If a node has\n   <span class="b i">\n    multiple connections\n   </span>\n   ,\n                    those connections are\n   <span class="b i">\n    separated by commas.\n   </span>\n  </li>\n </ul>\n</ul>\n<p>\n You can guide Captain Xarlos through the shortest path, but he first would\n            like to know\n <span class="b i">\n  how many units of space must be \n            traversed\n </span>\n .\n <br/>\n <span class="sm">\n  (Each node represents one unit of space.)\n </span>\n</p>\n<h4>\n For example:\n</h4>\n<div class="flex-container">\n <div class="container-item">\n  Consider this data\n  <span class="code free">\n   10,31\n   <br/>\n   10:18\n   <br/>\n   12:13,20\n   <br/>\n   13:12,14\n   <br/>\n   14:13,15,22\n   <br/>\n   15:14\n   <br/>\n   18:10,26\n   <br/>\n   20:12,28\n   <br/>\n   22:14,30\n   <br/>\n   26:18,27\n   <br/>\n   27:26,28\n   <br/>\n   28:27,29\n   <br/>\n   29:28,30\n   <br/>\n   30:22,29,31\n   <br/>\n   31:30\n  </span>\n </div>\n <div class="column">\n  <div class="column-content">\n   You see in the first line that the starting node is\n   <span class="code part">\n    10\n   </span>\n   and the ending node is\n   <span class="code part">\n    31\n   </span>\n   .\n  </div>\n  <div class="spacer">\n  </div>\n  <div class="column-content">\n   If it helps to visualize this as a 2D maze, it would\n                    look like this\n  </div>\n  <div class="spacer">\n  </div>\n  <div class="column-content">\n   <table class="map">\n    <tr>\n     <td>\n      #\n     </td>\n     <td>\n      #\n     </td>\n     <td>\n      #\n     </td>\n     <td>\n      #\n     </td>\n     <td>\n      #\n     </td>\n     <td>\n      #\n     </td>\n     <td>\n      #\n     </td>\n     <td>\n      #\n     </td>\n    </tr>\n    <tr>\n     <td>\n      #\n     </td>\n     <td class="o">\n      10\n     </td>\n     <td>\n      #\n     </td>\n     <td class="o">\n      12\n     </td>\n     <td class="o">\n      13\n     </td>\n     <td class="o">\n      14\n     </td>\n     <td class="o">\n      15\n     </td>\n     <td>\n      #\n     </td>\n    </tr>\n    <tr>\n     <td>\n      #\n     </td>\n     <td class="o">\n      18\n     </td>\n     <td>\n      #\n     </td>\n     <td class="o">\n      20\n     </td>\n     <td>\n      #\n     </td>\n     <td class="o">\n      22\n     </td>\n     <td>\n      #\n     </td>\n     <td>\n      #\n     </td>\n    </tr>\n    <tr>\n     <td>\n      #\n     </td>\n     <td class="o">\n      26\n     </td>\n     <td class="o">\n      27\n     </td>\n     <td class="o">\n      28\n     </td>\n     <td class="o">\n      29\n     </td>\n     <td class="o">\n      30\n     </td>\n     <td class="o">\n      31\n     </td>\n     <td>\n      #\n     </td>\n    </tr>\n    <tr>\n     <td>\n      #\n     </td>\n     <td>\n      #\n     </td>\n     <td>\n      #\n     </td>\n     <td>\n      #\n     </td>\n     <td>\n      #\n     </td>\n     <td>\n      #\n     </td>\n     <td>\n      #\n     </td>\n     <td>\n      #\n     </td>\n    </tr>\n   </table>\n  </div>\n </div>\n</div>\n<p>\n Following the nodes\' connections, you can take a different of paths:\n <ul>\n  <li>\n   10-18-26-27-28-20-12-13-14-22-30-31 : 12 units of space\n  </li>\n  <li>\n   10-18-26-27-28-29-30-31 : 8 units of space\n  </li>\n </ul>\n The shortest path through this map is\n <span class="code part">\n  8\n </span>\n units of space long.\n</p>\n<div class="imgcontainer">\n <table class="map">\n  <tr>\n   <td>\n    #\n   </td>\n   <td>\n    #\n   </td>\n   <td>\n    #\n   </td>\n   <td>\n    #\n   </td>\n   <td>\n    #\n   </td>\n   <td>\n    #\n   </td>\n   <td>\n    #\n   </td>\n   <td>\n    #\n   </td>\n  </tr>\n  <tr>\n   <td>\n    #\n   </td>\n   <td class="select">\n    10\n   </td>\n   <td>\n    #\n   </td>\n   <td class="o">\n    12\n   </td>\n   <td class="o">\n    13\n   </td>\n   <td class="o">\n    14\n   </td>\n   <td class="o">\n    15\n   </td>\n   <td>\n    #\n   </td>\n  </tr>\n  <tr>\n   <td>\n    #\n   </td>\n   <td class="select">\n    18\n   </td>\n   <td>\n    #\n   </td>\n   <td class="o">\n    20\n   </td>\n   <td>\n    #\n   </td>\n   <td class="o">\n    22\n   </td>\n   <td>\n    #\n   </td>\n   <td>\n    #\n   </td>\n  </tr>\n  <tr>\n   <td>\n    #\n   </td>\n   <td class="select">\n    26\n   </td>\n   <td class="select">\n    27\n   </td>\n   <td class="select">\n    28\n   </td>\n   <td class="select">\n    29\n   </td>\n   <td class="select">\n    30\n   </td>\n   <td class="select">\n    31\n   </td>\n   <td>\n    #\n   </td>\n  </tr>\n  <tr>\n   <td>\n    #\n   </td>\n   <td>\n    #\n   </td>\n   <td>\n    #\n   </td>\n   <td>\n    #\n   </td>\n   <td>\n    #\n   </td>\n   <td>\n    #\n   </td>\n   <td>\n    #\n   </td>\n   <td>\n    #\n   </td>\n  </tr>\n </table>\n</div>\n<p>\n Now, it\'s time to navigate the actual map through the Nebula Labyrinth.\n</p>',
                        instructions='Here is your data for the starting point, ending point, and nodes:',
                        input_type='txt',
                        form='<label class="main" for="answer1">\n How many units of space does the shortest path traverse?\n <br/>\n</label>\n<input autocomplete="off" name="answer1" placeholder="..." type="text"/>\n<button>\n Submit\n</button>',
                        solution='<label class="main">\n Your answer was\n <span class="b i">\n  289\n </span>\n .\n</label>',
                    ),
                    SubEntry(
                        main_entry_id=9,
                        sub_entry_id=2,
                        title='Wormholey Moley!',
                        content='<p>\n At the Bridge, Captain Xarlos is delighted to have a map to the Aurawroughts. \n            Together, you expertly navigate the ship through the electromagnetic storms, \n            following your path. Once clear of the Nebula Labyrinth, you find yourselves \n            in a\n <span class="b i">\n  clearing of open space\n </span>\n . There\'s no sign of the \n            Aurawroughts in sight, so there must be\n <span class="b i">\n  more to the route \n            ahead\n </span>\n , but what?\n</p>\n<p>\n Just then, you see Captain Xarlos\' face\n <a href="https://dictionary.cambridge.org/dictionary/english/as-white-as-a-sheet">\n  turn white\n </a>\n ,\n            his hand ready on his\n <a href="https://en.wikipedia.org/wiki/Raygun">\n  space blaster\n </a>\n ,\n            staring just above your left shoulder. You instantly know it must be the tiny defector,\n            but you turn to look anyway while trying to reassure the captain that everything is\n            fine. Captain Xarlos is skeptical but ultimately trusts you and relaxes a bit as you\n            explain the creature.\n</p>\n<p>\n It turns out,\n <span class="b i">\n  the small defector has forgotten to give you \n            the other half of the directions to the Aurawroughts\n </span>\n . It gives you\n <span class="b i">\n  another sheet of nodes\n </span>\n , in the same format as before. \n            This time, there are no storms blocking your path, but instead, a\n <span class="b i">\n  vast open space guarded by the Aurawrought\n  <a href="https://en.wikipedia.org/wiki/Stealth_technology">\n   stealth\n            army\n  </a>\n </span>\n . The nodes represent paths on the map that are outside of the\n <a href="https://en.wikipedia.org/wiki/Line_of_sight">\n  line of sight\n </a>\n of \n            those enemy ships.\n</p>\n<p>\n You will need to\n <span class="b i">\n  travel through\n  <a href="https://en.wikipedia.org/wiki/Wormhole">\n   wormholes\n  </a>\n </span>\n to reach \n            the heart of the Aurawrought\'s operations. The issue is that\n <span class="b i">\n  each wormhole can connect to a great many other\n            nodes\n </span>\n , reflected on your puzzle input, and choosing\n <span class="b i">\n  the wrong node to travel to could add hours or even days to \n            your journey\n </span>\n . Following every path from a wormhole will not be the most \n            efficient route. It\'s clear that scouring the depths of space won\'t work. \n            Instead, consider examining the\n <span class="b i lg">\n  breath\n </span>\n of space \n            for a more effective strategy.\n</p>\n<p>\n For this mission as well, Captain Xarlos must determine\n <span class="b i">\n  how \n            many units of space will be traversed\n </span>\n .\n</p>\n<h4>\n For example:\n</h4>\n<p>\n You will recognize wormholes on your document by the large number of connections that\n            the node has. While most nodes connect to just a few other nodes (usually up, down,\n            left, or right if you think of it as a 2D grid), wormholes connect to many more.\n <span class="code free">\n  297:197,1209,1573,1733,2127,3168,3176,3184,3252,3754,3758, …\n </span>\n Apart from that, units of space are measured exactly the same as before with the\n            wormhole node counting as one unit, and the connection you choose to follow counting\n            as another.\n</p>\n<p>\n Help come up with a plan so you and Captain Xarlos can navigate your way to Zorak,\n            avoiding detection.\n</p>',
                        instructions='Here is your data for the starting point, ending point, and nodes:',
                        input_type='txt',
                        form='<label class="main" for="answer2">\n How many units of space does the shortest path traverse?\n <br/>\n</label>\n<input autocomplete="off" name="answer2" placeholder="..." type="text"/>\n<button>\n Submit\n</button>',
                        solution='<label class="main">\n Your answer was\n <span class="b i">\n  424\n </span>\n .\n</label>',
                    ),
                    SubEntry(
                        main_entry_id=10,
                        sub_entry_id=1,
                        title='All Hands on Deck',
                        content='<p>\n You\'ve navigated through the wormhole and arrived just outside of the \n            Aurawroughts\n <a href="https://www.dictionary.com/browse/headquarters">\n  secret\n            base\n </a>\n , successfully avoiding detection by enemy ships. Captain Xarlos\n <span class="b i">\n  calls\n  <a href="https://www.dictionary.com/browse/all-hands-on-deck">\n   all hands to\n            the Main Deck\n  </a>\n </span>\n . The ship\'s\n <a href="https://en.wikipedia.org/wiki/Laser">\n  high-powered laser\n </a>\n needs\n            to be manned for the upcoming attack, and your assistance is required with\n            logistics.\n</p>\n<p>\n <span class="b i">\n  The hallways leading to the Main Deck have\n            different capacities\n </span>\n , allowing varying numbers of crew members to\n            pass through simultaneously.\n</p>\n<p>\n <span class="b i">\n  Starting from the source, Storage Room 1 (S1)\n </span>\n , the\n            crew must\n <span class="b i">\n  choose their paths through the hallways\n </span>\n ,\n            passing other storage rooms or junctions,\n <span class="b i">\n  to reach the \n            destination, the Main Deck (MD)\n </span>\n . Captain Xarlos emphasizes the need for \n            fast, efficient movement and\n <span class="b i">\n  requests a calculation of the\n  <a href="https://en.wikipedia.org/wiki/Ford%E2%80%93Fulkerson_algorithm">\n   maximum flow\n  </a>\n </span>\n —the greatest number of crew members that can move\n            through the hallways at one time.\n</p>\n<p>\n You quickly annotate\n <span class="b i">\n  the floor plan\n </span>\n on your\n            holographic tablet,\n <span class="b i">\n  listing each hallway by its connecting\n            rooms, separated by a hyphen, followed by a space and the hallway\'s\n            capacity\n </span>\n —this serves as your puzzle input.\n</p>\n<p>\n It\'s crucial that no crew members linger in any room or hallway, as this would\n            restrict the flow. The entire crew that\n <span class="b i">\n  starts from the\n            source (S1) must travel to the destination (MD) and arrive together\n </span>\n . \n            Captain Xarlos awaits your calculation of the maximum number of crew members \n            that can flow through the hallways simultaneously so he can efficiently \n            instruct his sizable crew.\n</p>\n<h4>\n For example:\n</h4>\n<p>\n With your source at\n <span class="code part">\n  A\n </span>\n , your destination at\n <span class="code part">\n  F\n </span>\n , and a floor plan like\n <span class="code free">\n  A-B 3\n  <br/>\n  A-C 3\n  <br/>\n  B-C 2\n  <br/>\n  B-D 3\n  <br/>\n  C-E 2\n  <br/>\n  D-E 4\n  <br/>\n  D-F 2\n  <br/>\n  E-F 3\n </span>\n Your task is to find the paths that result in\n <span class="b i">\n  getting\n            the most possible crew members to the destination, given the hallways\' \n            capacity restrictions\n </span>\n .\n</p>\n<div class="imgcontainer">\n <img class="fill" src="../static/images/10/example.gif"/>\n</div>\n<p>\n Demonstrated in the animation above, you can see the best paths to\n            achieve the maximum possible flow from the source to the destination.\n</p>\n<p>\n In discovering this most efficient selection of paths, you can\n            determine that the maximum flow for this floor plan is\n <span class="code part">\n  5\n </span>\n .\n</p>',
                        instructions='Your source is\n<span class="code part main">\n S1\n</span>\nand your destination is\n<span class="code part main">\n MD\n</span>\n<br/>\nHere is your floor plan:',
                        input_type='txt',
                        form='<label class="main" for="answer1">\n What is the maximum flow?\n <br/>\n</label>\n<input autocomplete="off" name="answer1" placeholder="..." type="text"/>\n<button>\n Submit\n</button>',
                        solution='<label class="main">\n Your answer was\n <span class="b i">\n  418\n </span>\n .\n</label>',
                    ),
                    SubEntry(
                        main_entry_id=10,
                        sub_entry_id=2,
                        title='Breach the Battle Dome™',
                        content='<p>\n The crew is in place and ready to commence. In the distance, you can see\n            the technology that the Aurawroughts intend to use to free Eos from her \n            galactic prison, safeguarded within a protective dome.\n</p>\n<div class="imgcontainer">\n <img class="midpic" src="../static/images/10/orb.png"/>\n</div>\n<p>\n Suddenly, the tiny defector materializes again, seemingly out of nowhere, \n            holding a large rolled sheet of paper. It explains that these are the\n <a href="https://en.wikipedia.org/wiki/Blueprint">\n  <span class="b i">\n   blueprints\n  </span>\n </a>\n for the for the protective dome\n guarding the Aurawrought \n            technology to free Eos.\n</p>\n<p>\n The inner technology is delicate and can quite easily be destroyed with a \n            blast from a laser, but the dome is much stronger. According to the blueprint, \n            this dome is a\n <span class="b i">\n  lattice of interconnecting points, each with \n            specific pathways for energy flow\n </span>\n . There is only\n <span class="b i">\n  one \n            viable point of attack—Point 0\n </span>\n .\n</p>\n<div class="imgcontainer">\n <a href="../static/images/10/blueprint.png">\n  <img class="fill" src="../static/images/10/blueprint.png"/>\n </a>\n</div>\n<p>\n Any laster blast targeting elsewhere on the shield will be deflected.\n            However, when struck at Point 0,\n <span class="b i">\n  the dome is designed to\n  <a href="https://en.wikipedia.org/wiki/Dissipation">\n   dissipate\n  </a>\n  the energy\n            across all its connected edges\n </span>\n . Each interconnecting point has a \n            direction and a capacity for the amount of energy it can transmit.\n</p>\n<p>\n To successfully penetrate the dome and destroy the technology inside, you must \n            first\n <span class="b i">\n  deliver a precise blast of energy from the \n            laser\n </span>\n . Sending\n <span class="b i">\n  too little energy will dissipate\n </span>\n across the edges and weaken the blast, while sending\n <span class="b i">\n  too much will cause a short-circuit\n </span>\n if the\n            capacity of any edge is exceeded with no alternative paths available to handle\n            the overflow. Your task is to calculate the\n <span class="b i">\n  maximum flow \n            from the source (Point 0) to the 5 destinations (Points 76, 77, 78, 79, and \n            80)\n </span>\n .\n</p>\n<p class="hint-label ssm">\n HINT (mouse-over to view):\n</p>\n<p class="hint ssm">\n Maximum flow algorithms work when there is only 1 destination. How would you \n            connect these 5 destinations into one final imaginary destination to aggregate \n            the maximum flow from all areas of the dome, and what should you consider for \n            the capacity for these imaginary edges?\n</p>\n<p>\n The tiny defector has also provided you with a\n <span class="b i">\n  list of\n            capacities for each edge, your puzzle input\n </span>\n , formatted similarly to \n            your previous floor plan annotations. Connecting points are separated by \n            hyphens, followed by a space and the capacity for that edge.\n <span class="b i">\n  A listed capacity of "Inf" indicates infinite capacity, \n            meaning there is no limitation on the energy that can flow between those two \n            points\n </span>\n .\n</p>',
                        instructions='Your source is\n<span class="code part main">\n S1\n</span>\nand your destinations are\n<span class="code part main">\n 76 77 78 79 80\n</span>\n<br/>\nHere is your list of capacities:',
                        input_type='txt',
                        form='<label class="main" for="answer2">\n What is exact amount of energy required to destroy the dome?\n <br/>\n</label>\n<input autocomplete="off" name="answer2" placeholder="..." type="text"/>\n<button>\n Submit\n</button>',
                        solution='<label class="main">\n Your answer was\n <span class="b i">\n  50512\n </span>\n .\n</label>',
                    ),
                ]
                db.session.add_all(sub_entries)
                print("Inserted html.")

        db.session.commit()


if __name__ == '__main__':
    main()
